<!DOCTYPE html><html  lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Upgrading from Nuxt 3 to Nuxt 4</title><style>body{background-color:#213c5b;font-family:Arial,sans-serif;margin:0}.pageWrapper{display:flex;flex-direction:column;margin-left:auto;margin-right:auto;max-width:1024px;min-height:100vh}.pageContent{background-color:#415c7b;color:#000!important;padding:15px}.pageContent article{background-color:#819cbb;border:1px solid #000;border-radius:10px;padding:15px}@media(min-width:1024px){.pageContent{border-left:1px solid #000;border-right:1px solid #000}}</style><style>.pageHeader[data-v-20fe9b8b]{align-items:center;background:#1e6695;background:linear-gradient(180deg,#1e6695 0,#74aacc,#79aecb 66%,#2f4a66);color:#000;display:flex;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#1e6695",endColorstr="#2f4a66",GradientType=0);justify-content:space-between;min-height:56px;padding-left:1rem;padding-right:1rem}.branding .logo[data-v-20fe9b8b]{color:#000;font-size:1.5rem;text-decoration:none}nav[data-v-20fe9b8b]{display:none}.mainNav[data-v-20fe9b8b]{background-color:#819cbb;border-radius:.5rem;box-shadow:0 4px 6px #0000004d;display:flex;flex-direction:column;gap:1rem;list-style:none;margin:0;padding:1rem}.mainNav li a[data-v-20fe9b8b]{color:#000;text-decoration:none;transition:color .3s}.hamburgerMenu[data-v-20fe9b8b]{cursor:pointer;display:flex;flex-direction:column;gap:.3rem}.hamburgerMenu span[data-v-20fe9b8b]{background-color:#000;height:3px;width:25px}nav.active[data-v-20fe9b8b]{display:block}@media(max-width:599px){.mainNav li[data-v-20fe9b8b]:hover{background-color:#7e99b8}nav.active[data-v-20fe9b8b]{position:absolute;right:16px;top:46px;width:200px;z-index:10}}@media(min-width:600px){.mainNav[data-v-20fe9b8b]{background:none;box-shadow:none;flex-direction:row;justify-content:center;padding:0}nav[data-v-20fe9b8b]{display:flex}.hamburgerMenu[data-v-20fe9b8b]{display:none}}@media(min-width:1024px){.pageHeader[data-v-20fe9b8b]{border:1px solid #000;border-bottom:0;border-radius:20px 20px 0 0;margin-top:10px}}</style><style>article{color:#000!important;max-width:992px!important}</style><style>footer[data-v-3e31ebce]{background:#415c7b;background:linear-gradient(180deg,#415c7b 0,#273749);border-bottom:1px solid #000;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#415c7b",endColorstr="#273749",GradientType=0);height:38px;line-height:38px;text-align:center}@media(min-width:1024px){footer[data-v-3e31ebce]{border:1px solid #000;border-radius:0 0 20px 20px;border-top:0}}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.CrOmIWev.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/2025/upgrade-nuxt-3-to-nuxt-4/_payload.json?3cde5678-4073-4ead-b124-b7ee462da61d"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C90IkbME.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3gFfxiL.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/JIXLtfGz.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D97-IT3t.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DUcFY4et.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DdWQ_VTE.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/XlsmYnSN.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DWj8ciPV.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DzyjELwd.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cd1zJpJG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B8niauQ8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B8HTDaKm.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DAHNdqeD.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CxZqCd_2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cfarb8OW.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BB9zPnfv.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CcPH1OWJ.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CImYUZc3.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BTSRcumi.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/IELS8-mM.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cc-sB-2B.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/dTtOh9i0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/o2z9aYFo.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/3cde5678-4073-4ead-b124-b7ee462da61d.json"><meta name="description" content="A Real-World Upgrade Experience"><meta property="og:title" content="mjk @ web - Upgrading from Nuxt 3 to Nuxt 4"><meta property="og:description" content="A Real-World Upgrade Experience"><meta property="og:image" content="/logo_518x270.png"><meta property="og:url" content="http://www.mjkweb.de"><meta name="twitter:title" content="mjk @ web - Upgrading from Nuxt 3 to Nuxt 4"><meta name="twitter:description" content="A Real-World Upgrade Experience"><meta name="twitter:image" content="/logo_200x200.png"><meta name="twitter:card" content="summary"><link rel="icon" type="mange/x-icon" href="/favicon.ico"><meta name="keywords" content="programming, coding, vue"><meta name="robots" content="index, follow"><meta name="author" content="Melchior Kannengießer"><script type="module" src="/_nuxt/C90IkbME.js" crossorigin></script></head><body><div id="__nuxt"><div class="pageWrapper"><header class="pageHeader" data-v-20fe9b8b><div class="branding" data-v-20fe9b8b><a href="/" class="logo" data-v-20fe9b8b>mjk @ web</a></div><nav class="" data-v-20fe9b8b><ul class="mainNav" data-v-20fe9b8b><li data-v-20fe9b8b><a href="/about" class="" data-v-20fe9b8b>About</a></li><li data-v-20fe9b8b><a href="/projects" class="" data-v-20fe9b8b>Projects</a></li><li data-v-20fe9b8b><a href="/links" class="" data-v-20fe9b8b>Links</a></li><li data-v-20fe9b8b><a href="/datenschutzerklaerung" class="" data-v-20fe9b8b>Datenschutz-Erklärung</a></li><li data-v-20fe9b8b><a href="/impressum" class="" data-v-20fe9b8b>Impressum</a></li></ul></nav><div class="hamburgerMenu" data-v-20fe9b8b><span data-v-20fe9b8b></span><span data-v-20fe9b8b></span><span data-v-20fe9b8b></span></div></header><div class="pageContent"><article class="prose"><div><h1 id="upgrading-from-nuxt-3-to-nuxt-4"><!--[-->Upgrading from Nuxt 3 to Nuxt 4<!--]--></h1><p><!--[-->It&#39;s Christmas time, so I have time to code. Nuxt 3 reaches its end of life in January 2026, and Nuxt 4 is the new kid on the block. So I decided to upgrade my projects to Nuxt 4. Since my blog is already configured to be Nuxt 4 ready and it&#39;s just a simple blog with some markdown files, it should be a no-brainer, right?<!--]--></p><p><!--[-->Well, as it turns out, even projects that are already &quot;Nuxt 4 ready&quot; can throw unexpected challenges at you. In this blog post, I&#39;ll document my experience upgrading three projects to Nuxt 4: my personal blog (already Nuxt 4 ready), a web business card/gallery project (also already Nuxt 4 ready), and Linxz—a more complex application that required a full migration.<!--]--></p><p><!--[-->The irony? Most of the issues I encountered were with the projects that were supposedly already ready for Nuxt 4. This upgrade wasn&#39;t just about updating dependencies—it involved dealing with breaking changes in Nuxt Content 3.x, fixing TypeScript configuration issues, and working around problems with dark mode templates and Open Graph metadata.<!--]--></p><p><!--[-->In this post, I&#39;ll walk you through the entire process, including the challenges I faced and how I solved them. Whether you&#39;re upgrading a single project or multiple projects like I did, I hope this honest account will help you avoid some of the pitfalls I encountered.<!--]--></p><h2 id="_1-preparation"><a href="#_1-preparation"><!--[-->1. Preparation<!--]--></a></h2><p><!--[-->Before jumping into the actual upgrade, I wanted to make sure I had a safe environment to experiment in. Since all my projects are already hosted on GitHub, I didn&#39;t need a separate backup—version control has that covered.<br>
If you&#39;re not using Git, it&#39;s a good idea to create a manual backup of your project folder before starting, just to be safe.<!--]--></p><p><!--[-->I created new branches specifically for the migration in each project:<!--]--></p><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span>git checkout -b upgrade/nuxt4
</span></span></code><!--]--></pre><p><!--[-->This allows me to work on the Nuxt 4 upgrade without touching the production code. If anything goes wrong, I can always fall back to the main branch or review the commit history.<!--]--></p><p><!--[-->If you&#39;re using Git on Windows and don&#39;t have access to a Bash shell, the command above should still work in PowerShell or your Git GUI. If you&#39;re not using Git at all, simply duplicate your project folder manually and work on the copy.<!--]--></p><p><!--[--><strong><!--[-->A confession:<!--]--></strong> At this stage, I should have started looking into the official <a href="https://nuxt.com/docs/getting-started/upgrade#nuxt-3-to-nuxt-4" rel="nofollow" target="_blank"><!--[-->Nuxt 4 upgrade guide<!--]--></a>. But I didn&#39;t. Why? Because I thought it would be a no-brainer—after all, two of my three projects were already configured to be Nuxt 4 ready. I figured I&#39;d just update the dependencies and be done with it.<!--]--></p><p><!--[-->As you&#39;ll see, that assumption was wrong. Even projects that are &quot;Nuxt 4 ready&quot; can have issues when you actually upgrade to Nuxt 4. So my first piece of advice: <strong><!--[-->Read the documentation first<!--]--></strong>, even if you think you don&#39;t need to.<!--]--></p><p><!--[-->Finally, I listed all major dependencies in each project and began checking whether they needed updates or if replacements were needed.<!--]--></p><h2 id="_2-migration"><a href="#_2-migration"><!--[-->2. Migration<!--]--></a></h2><h3 id="_21-updating-dependencies"><a href="#_21-updating-dependencies"><!--[-->2.1 Updating Dependencies<!--]--></a></h3><p><!--[-->The first step in the actual upgrade process is to update the project dependencies. Since Nuxt 4 is the latest major version, the main change is updating the <code><!--[-->nuxt<!--]--></code> package itself. However, you may also need to update related modules and Nuxt Content if you&#39;re using it.<!--]--></p><p><!--[--><strong><!--[-->How do you know which dependencies need to be updated?<!--]--></strong><!--]--></p><p><!--[-->Start by opening your <code><!--[-->package.json<!--]--></code> and making a list of all packages under <code><!--[-->dependencies<!--]--></code> and <code><!--[-->devDependencies<!--]--></code>. For each package, check the official documentation or GitHub repository to see if it supports Nuxt 4. The <a href="https://nuxt.com/docs/getting-started/upgrade#nuxt-3-to-nuxt-4" rel="nofollow"><!--[-->Nuxt 4 upgrade guide<!--]--></a> is a great starting point.<!--]--></p><p><!--[-->You can also use tools like <a href="https://www.npmjs.com/package/npm-check-updates" rel="nofollow"><!--[-->npm-check-updates<!--]--></a> to quickly see which of your dependencies have newer versions available:<!--]--></p><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span>npx npm-check-updates
</span></span></code><!--]--></pre><p><!--[-->However, always double-check compatibility manually, as not every update is Nuxt 4-ready.<!--]--></p><p><!--[-->In my projects, I identified the following dependencies that needed updates:<!--]--></p><table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Package<!--]--></th><th><!--[-->Status in Nuxt 4<!--]--></th><th><!--[-->Recommendation<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->nuxt<!--]--></td><td><!--[-->❌ Needs update<!--]--></td><td><!--[-->Update to <code><!--[-->nuxt@^4.0.0<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@nuxt/content<!--]--></td><td><!--[-->⚠️  Major version change<!--]--></td><td><!--[-->Update to <code><!--[-->@nuxt/content@^3.0.0<!--]--></code> (breaking changes!)<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@pinia/nuxt<!--]--></td><td><!--[-->✅ Compatible<!--]--></td><td><!--[-->Update to latest version<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@prisma/nuxt<!--]--></td><td><!--[-->✅ Compatible<!--]--></td><td><!--[-->Update to latest version<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@nuxtjs/tailwindcss<!--]--></td><td><!--[-->✅ Compatible<!--]--></td><td><!--[-->Update to latest version<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@nuxt/eslint<!--]--></td><td><!--[-->✅ Compatible<!--]--></td><td><!--[-->Update to latest version<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->@nuxt/test-utils<!--]--></td><td><!--[-->✅ Compatible<!--]--></td><td><!--[-->Update to latest version<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->The most significant change was Nuxt Content, which jumped from version 2.x to 3.x. This introduced breaking changes in the API that I&#39;ll discuss in more detail later.<!--]--></p><p><!--[-->To update the dependencies, I used the following commands:<!--]--></p><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span>npm install nuxt@latest
</span></span><span class="line" line="2"><span>npm install @nuxt/content@latest
</span></span></code><!--]--></pre><p><!--[-->For the other modules, I updated them to their latest versions as well:<!--]--></p><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span>npm install @pinia/nuxt@latest @prisma/nuxt@latest @nuxtjs/tailwindcss@latest
</span></span></code><!--]--></pre><p><!--[-->After running these commands, my <code><!--[-->package.json<!--]--></code> files were updated and ready for the next steps in the migration.<!--]--></p><h3 id="_22-adapting-the-configuration"><a href="#_22-adapting-the-configuration"><!--[-->2.2 Adapting the Configuration<!--]--></a></h3><p><!--[-->With the dependencies updated, the next step is to adapt your Nuxt configuration to match Nuxt 4&#39;s requirements. The changes are relatively minor compared to the Nuxt 2→3 migration, but there are still some important updates to make.<!--]--></p><h4 id="_221-remove-futurecompatibilityversion"><a href="#_221-remove-futurecompatibilityversion"><!--[-->2.2.1 Remove <code><!--[-->future.compatibilityVersion<!--]--></code><!--]--></a></h4><p><!--[-->If you had set <code><!--[-->future.compatibilityVersion: 4<!--]--></code> in your <code><!--[-->nuxt.config.ts<!--]--></code> to prepare for Nuxt 4, you can now remove it. This option is no longer needed since you&#39;re actually using Nuxt 4:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineNuxtConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="2"><span class="s0_hs">  // Remove this:
</span></span><span class="line" line="3"><span class="s0_hs">  // future: {
</span></span><span class="line" line="4"><span class="s0_hs">  //   compatibilityVersion: 4,
</span></span><span class="line" line="5"><span class="s0_hs">  // },
</span></span><span class="line" line="6"><span class="svy0-">  
</span></span><span class="line" line="7"><span class="s0_hs">  // Keep this:
</span></span><span class="line" line="8"><span class="s-wAU">  compatibilityDate</span><span class="sAklC">:</span><span class="sAklC"> &#39;</span><span class="sfyAc">2024-11-01</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="s0_hs"> // Update to current date
</span></span><span class="line" line="9"><span class="s0_hs">  // ... rest of your config
</span></span><span class="line" line="10"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><h4 id="_222-update-compatibilitydate"><a href="#_222-update-compatibilitydate"><!--[-->2.2.2 Update <code><!--[-->compatibilityDate<!--]--></code><!--]--></a></h4><p><!--[-->Update the <code><!--[-->compatibilityDate<!--]--></code> to the current date. This ensures you&#39;re using the latest Nuxt 4 features and conventions:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineNuxtConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="2"><span class="s-wAU">  compatibilityDate</span><span class="sAklC">:</span><span class="sAklC"> &#39;</span><span class="sfyAc">2024-12-24</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="s0_hs"> // Update to current date
</span></span><span class="line" line="3"><span class="s0_hs">  // ... rest of your config
</span></span><span class="line" line="4"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><h4 id="_223-typescript-reference"><a href="#_223-typescript-reference"><!--[-->2.2.3 TypeScript Reference<!--]--></a></h4><p><!--[-->When using TypeScript, you might encounter an error like <code><!--[-->Cannot find name &#39;defineNuxtConfig&#39;<!--]--></code>. To fix this, add a TypeScript reference directive at the top of your <code><!--[-->nuxt.config.ts<!--]--></code>:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">// https://nuxt.com/docs/api/configuration/nuxt-config
</span></span><span class="line" line="2"><span class="s0_hs">/// </span><span class="s6cf3">&lt;</span><span class="st21m">reference</span><span class="sVyDW"> types</span><span class="s6cf3">=</span><span class="s6cf3">&quot;</span><span class="swXnL">nuxt</span><span class="s6cf3">&quot;</span><span class="s6cf3"> /&gt;
</span></span><span class="line" line="3"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineNuxtConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="4"><span class="s0_hs">  // ... your config
</span></span><span class="line" line="5"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->You may also need to add <code><!--[-->&quot;types&quot;: [&quot;nuxt&quot;]<!--]--></code> to your <code><!--[-->tsconfig.json<!--]--></code>:<!--]--></p><pre class="language-json shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sAklC">{
</span></span><span class="line" line="2"><span class="sAklC">  &quot;</span><span class="sJ14y">compilerOptions</span><span class="sAklC">&quot;</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="3"><span class="sAklC">    &quot;</span><span class="s5Dmg">types</span><span class="sAklC">&quot;</span><span class="sAklC">:</span><span class="sAklC"> [</span><span class="sAklC">&quot;</span><span class="sfyAc">nuxt</span><span class="sAklC">&quot;</span><span class="sAklC">]
</span></span><span class="line" line="4"><span class="sAklC">  }
</span></span><span class="line" line="5"><span class="sAklC">}
</span></span></code><!--]--></pre><p><!--[-->This ensures TypeScript recognizes Nuxt&#39;s global types, including <code><!--[-->defineNuxtConfig<!--]--></code>.<!--]--></p><h3 id="_23-adapting-the-project-structure-linxz-only"><a href="#_23-adapting-the-project-structure-linxz-only"><!--[-->2.3 Adapting the Project Structure (Linxz Only)<!--]--></a></h3><p><!--[-->For my Linxz project, which wasn&#39;t already Nuxt 4 ready, I needed to restructure the project to follow Nuxt 4&#39;s new conventions. Nuxt 4 introduces a new <code><!--[-->app/<!--]--></code> directory structure that organizes your application code more clearly.<!--]--></p><p><!--[--><strong><!--[-->What needs to be moved?<!--]--></strong><!--]--></p><p><!--[-->The following directories should be moved into a new <code><!--[-->app/<!--]--></code> directory:<!--]--></p><ul><!--[--><li><!--[--><code><!--[-->pages/<!--]--></code> → <code><!--[-->app/pages/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->components/<!--]--></code> → <code><!--[-->app/components/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->layouts/<!--]--></code> → <code><!--[-->app/layouts/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->composables/<!--]--></code> → <code><!--[-->app/composables/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->plugins/<!--]--></code> → <code><!--[-->app/plugins/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->stores/<!--]--></code> → <code><!--[-->app/stores/<!--]--></code><!--]--></li><li><!--[--><code><!--[-->app.vue<!--]--></code> → <code><!--[-->app/app.vue<!--]--></code><!--]--></li><li><!--[--><code><!--[-->lib/<!--]--></code> → <code><!--[-->app/lib/<!--]--></code> (if you have one)<!--]--></li><!--]--></ul><p><!--[-->Directories that remain in the root:<!--]--></p><ul><!--[--><li><!--[--><code><!--[-->server/<!--]--></code> (stays at root)<!--]--></li><li><!--[--><code><!--[-->public/<!--]--></code> (stays at root)<!--]--></li><li><!--[--><code><!--[-->tests/<!--]--></code> (stays at root)<!--]--></li><li><!--[--><code><!--[-->config/<!--]--></code> (stays at root, if you have one)<!--]--></li><li><!--[--><code><!--[-->prisma/<!--]--></code> (stays at root, if you have one)<!--]--></li><!--]--></ul><p><!--[--><strong><!--[-->Migration steps:<!--]--></strong><!--]--></p><ol><!--[--><li><!--[-->Create the <code><!--[-->app/<!--]--></code> directory in your project root.<!--]--></li><li><!--[-->Move the directories:<!--]--></li><!--]--></ol><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span># On Linux/macOS
</span></span><span class="line" line="2"><span>mkdir app
</span></span><span class="line" line="3"><span>mv pages components layouts composables plugins stores lib app/
</span></span><span class="line" line="4"><span>mv app.vue app/
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span># On Windows PowerShell
</span></span><span class="line" line="7"><span>mkdir app
</span></span><span class="line" line="8"><span>Move-Item pages,components,layouts,composables,plugins,stores,lib app/
</span></span><span class="line" line="9"><span>Move-Item app.vue app/
</span></span></code><!--]--></pre><ol start="3"><!--[--><li><!--[-->Update <code><!--[-->nuxt.config.ts<!--]--></code> to set <code><!--[-->srcDir<!--]--></code>:<!--]--></li><!--]--></ol><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineNuxtConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="2"><span class="s-wAU">  srcDir</span><span class="sAklC">:</span><span class="sAklC"> &#39;</span><span class="sfyAc">app</span><span class="sAklC">&#39;</span><span class="sAklC">,
</span></span><span class="line" line="3"><span class="s0_hs">  // ... rest of your config
</span></span><span class="line" line="4"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><ol start="4"><!--[--><li><!--[-->Update import paths for server-side code. Since <code><!--[-->~<!--]--></code> and <code><!--[-->@<!--]--></code> now point to <code><!--[-->app/<!--]--></code>, you need to use <code><!--[-->~~<!--]--></code> for root-level imports:<!--]--></li><!--]--></ol><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">// Old (points to app/server, which doesn&#39;t exist)
</span></span><span class="line" line="2"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~/server/utils</span><span class="sAklC">&#39;
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="s0_hs">// New (points to root/server)
</span></span><span class="line" line="5"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~~/server/utils</span><span class="sAklC">&#39;
</span></span></code><!--]--></pre><ol start="5"><!--[--><li><!--[-->Update test configuration. If you&#39;re using Vitest, update your <code><!--[-->vitest.config.ts<!--]--></code> aliases:<!--]--></li><!--]--></ol><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineVitestConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="2"><span class="s-wAU">  resolve</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="3"><span class="s-wAU">    alias</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="4"><span class="sAklC">      &#39;</span><span class="s-wAU">~</span><span class="sAklC">&#39;</span><span class="sAklC">:</span><span class="svy0-"> path</span><span class="sAklC">.</span><span class="sdLwU">resolve</span><span class="svy0-">(__dirname</span><span class="sAklC">,</span><span class="sAklC"> &#39;</span><span class="sfyAc">./app</span><span class="sAklC">&#39;</span><span class="svy0-">)</span><span class="sAklC">,
</span></span><span class="line" line="5"><span class="sAklC">      &#39;</span><span class="s-wAU">@</span><span class="sAklC">&#39;</span><span class="sAklC">:</span><span class="svy0-"> path</span><span class="sAklC">.</span><span class="sdLwU">resolve</span><span class="svy0-">(__dirname</span><span class="sAklC">,</span><span class="sAklC"> &#39;</span><span class="sfyAc">./app</span><span class="sAklC">&#39;</span><span class="svy0-">)</span><span class="sAklC">,
</span></span><span class="line" line="6"><span class="sAklC">    }
</span></span><span class="line" line="7"><span class="sAklC">  }
</span></span><span class="line" line="8"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->And update test files to use <code><!--[-->~~/server<!--]--></code> for server imports:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">// Old
</span></span><span class="line" line="2"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~/server/utils</span><span class="sAklC">&#39;
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="s0_hs">// New
</span></span><span class="line" line="5"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~~/server/utils</span><span class="sAklC">&#39;
</span></span></code><!--]--></pre><p><!--[-->After these changes, my Linxz project structure looked like this:<!--]--></p><pre class="language-text"><!--[--><code>linxz/
├── app/
│   ├── components/
│   ├── layouts/
│   ├── pages/
│   ├── composables/
│   ├── plugins/
│   ├── stores/
│   ├── lib/
│   └── app.vue
├── server/
├── public/
├── tests/
├── config/
├── prisma/
├── nuxt.config.ts
└── package.json
</code><!--]--></pre><h3 id="_24-nuxt-content-3x-migration"><a href="#_24-nuxt-content-3x-migration"><!--[-->2.4 Nuxt Content 3.x Migration<!--]--></a></h3><p><!--[-->One of the biggest changes in this upgrade was Nuxt Content jumping from version 2.x to 3.x. This introduced breaking changes in the API, particularly for data collections.<!--]--></p><p><!--[--><strong><!--[-->The main breaking change: <code><!--[-->.path()<!--]--></code> no longer works for data collections<!--]--></strong><!--]--></p><p><!--[-->In Nuxt Content 2.x, you could query data collections like this:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sJ14y">const</span><span class="sAklC"> {</span><span class="svy0-"> data </span><span class="sAklC">}</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> useAsyncData</span><span class="svy0-">(</span><span class="sAklC">&#39;</span><span class="sfyAc">links</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="sJ14y"> async</span><span class="sAklC"> ()</span><span class="sJ14y"> =&gt;</span><span class="sAklC"> {
</span></span><span class="line" line="2"><span class="s6cf3">  return</span><span class="s6cf3"> await</span><span class="sdLwU"> queryCollection</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">data</span><span class="sAklC">&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="3"><span class="sAklC">    .</span><span class="sdLwU">path</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">/link-sets</span><span class="sAklC">&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="4"><span class="sAklC">    .</span><span class="sdLwU">first</span><span class="s-wAU">()
</span></span><span class="line" line="5"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->In Nuxt Content 3.x, <code><!--[-->.path()<!--]--></code> doesn&#39;t work for data collections anymore. Instead, you need to use <code><!--[-->.all()<!--]--></code> and filter manually:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sJ14y">const</span><span class="sAklC"> {</span><span class="svy0-"> data </span><span class="sAklC">}</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> useAsyncData</span><span class="svy0-">(</span><span class="sAklC">&#39;</span><span class="sfyAc">links</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="sJ14y"> async</span><span class="sAklC"> ()</span><span class="sJ14y"> =&gt;</span><span class="sAklC"> {
</span></span><span class="line" line="2"><span class="sJ14y">  const</span><span class="svy0-"> allData</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> queryCollection</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">data</span><span class="sAklC">&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="3"><span class="sAklC">    .</span><span class="sdLwU">all</span><span class="s-wAU">()
</span></span><span class="line" line="4"><span class="sJ14y">  const</span><span class="svy0-"> doc</span><span class="sAklC"> =</span><span class="svy0-"> allData</span><span class="sAklC">.</span><span class="sdLwU">find</span><span class="s-wAU">(</span><span class="sLFUT">item</span><span class="sJ14y"> =&gt;</span><span class="s-wAU"> 
</span></span><span class="line" line="5"><span class="svy0-">    item</span><span class="sAklC">.</span><span class="svy0-">_path</span><span class="sAklC"> ===</span><span class="sAklC"> &#39;</span><span class="sfyAc">/link-sets</span><span class="sAklC">&#39;</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="6"><span class="svy0-">    item</span><span class="sAklC">.</span><span class="svy0-">_id</span><span class="sAklC"> ===</span><span class="sAklC"> &#39;</span><span class="sfyAc">link-sets</span><span class="sAklC">&#39;
</span></span><span class="line" line="7"><span class="s-wAU">  )
</span></span><span class="line" line="8"><span class="s6cf3">  return</span><span class="svy0-"> doc
</span></span><span class="line" line="9"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->This affected my Links and Projects pages, which I&#39;ll discuss in more detail in the Challenges section.<!--]--></p><h2 id="_3-challenges-solutions"><a href="#_3-challenges-solutions"><!--[-->3. Challenges &amp; Solutions<!--]--></a></h2><p><!--[-->No upgrade is ever completely smooth, and moving from Nuxt 3 to Nuxt 4 was no exception. Here are the main challenges I encountered during the process—and how I solved them:<!--]--></p><h3 id="_31-typescript-configuration-errors"><a href="#_31-typescript-configuration-errors"><!--[-->3.1 TypeScript Configuration Errors<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
After updating to Nuxt 4, TypeScript complained about <code><!--[-->defineNuxtConfig<!--]--></code> not being found:<!--]--></p><pre class="language-text"><!--[--><code>Cannot find name &#39;defineNuxtConfig&#39;. Did you mean &#39;defineNitroConfig&#39;?
</code><!--]--></pre><p><!--[--><strong><!--[-->Solution:<!--]--></strong><br>
Add a TypeScript reference directive at the top of your <code><!--[-->nuxt.config.ts<!--]--></code>:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">/// </span><span class="s6cf3">&lt;</span><span class="st21m">reference</span><span class="sVyDW"> types</span><span class="s6cf3">=</span><span class="s6cf3">&quot;</span><span class="swXnL">nuxt</span><span class="s6cf3">&quot;</span><span class="s6cf3"> /&gt;
</span></span><span class="line" line="2"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineNuxtConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="3"><span class="s0_hs">  // ... your config
</span></span><span class="line" line="4"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->You may also need to add <code><!--[-->&quot;types&quot;: [&quot;nuxt&quot;]<!--]--></code> to your <code><!--[-->tsconfig.json<!--]--></code>:<!--]--></p><pre class="language-json shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sAklC">{
</span></span><span class="line" line="2"><span class="sAklC">  &quot;</span><span class="sJ14y">compilerOptions</span><span class="sAklC">&quot;</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="3"><span class="sAklC">    &quot;</span><span class="s5Dmg">types</span><span class="sAklC">&quot;</span><span class="sAklC">:</span><span class="sAklC"> [</span><span class="sAklC">&quot;</span><span class="sfyAc">nuxt</span><span class="sAklC">&quot;</span><span class="sAklC">]
</span></span><span class="line" line="4"><span class="sAklC">  }
</span></span><span class="line" line="5"><span class="sAklC">}
</span></span></code><!--]--></pre><p><!--[-->This ensures TypeScript recognizes Nuxt&#39;s global types. The triple-slash directive is particularly important and should be placed at the very top of your config file.<!--]--></p><h3 id="_32-baseurl-for-github-pages-windows"><a href="#_32-baseurl-for-github-pages-windows"><!--[-->3.2 baseURL for GitHub Pages (Windows)<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
For the web business card project, I needed to set a <code><!--[-->baseURL<!--]--></code> for GitHub Pages deployment. The standard approach of setting environment variables doesn&#39;t work well on Windows PowerShell:<!--]--></p><pre class="language-sh shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span># This doesn&#39;t work on Windows PowerShell
</span></span><span class="line" line="2"><span>BASE_URL=/kunstkanne/ npm run generate
</span></span></code><!--]--></pre><p><!--[--><strong><!--[-->Solution (or rather, workaround):<!--]--></strong><br>
I ended up not deploying the web business card to GitHub Pages anymore. This is a workaround rather than a proper solution, but it was the path of least resistance for this particular project.<!--]--></p><p><!--[-->If you need to solve this properly, you could:<!--]--></p><ol><!--[--><li><!--[-->Use <code><!--[-->cross-env<!--]--></code> to set environment variables cross-platform<!--]--></li><li><!--[-->Detect the npm script in <code><!--[-->nuxt.config.ts<!--]--></code> and set <code><!--[-->baseURL<!--]--></code> accordingly<!--]--></li><li><!--[-->Use a <code><!--[-->.env<!--]--></code> file (though this affects local development too)<!--]--></li><!--]--></ol><p><!--[-->For now, I&#39;ve documented this as an unresolved issue that I worked around rather than solved.<!--]--></p><h3 id="_33-nuxt-content-3x-api-changes"><a href="#_33-nuxt-content-3x-api-changes"><!--[-->3.3 Nuxt Content 3.x API Changes<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
After upgrading to Nuxt Content 3.x, my Links and Projects pages stopped showing data. The error in the console was:<!--]--></p><pre class="language-text"><!--[--><code>no such column: &quot;path&quot;
</code><!--]--></pre><p><!--[-->The issue was that <code><!--[-->.path()<!--]--></code> no longer works for data collections in Nuxt Content 3.x.<!--]--></p><p><!--[--><strong><!--[-->Solution:<!--]--></strong><br>
Replace <code><!--[-->.path()<!--]--></code> with <code><!--[-->.all()<!--]--></code> and filter manually:<!--]--></p><pre class="language-vue shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sAklC">&lt;</span><span class="s-wAU">script</span><span class="sJ14y"> setup</span><span class="sAklC">&gt;
</span></span><span class="line" line="2"><span class="sJ14y">const</span><span class="sAklC"> {</span><span class="s-wAU"> data</span><span class="sAklC">:</span><span class="svy0-"> result </span><span class="sAklC">}</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> useAsyncData</span><span class="svy0-">(
</span></span><span class="line" line="3"><span class="sAklC">  &#39;</span><span class="sfyAc">link-sets</span><span class="sAklC">&#39;</span><span class="sAklC">,
</span></span><span class="line" line="4"><span class="sJ14y">  async</span><span class="sAklC"> ()</span><span class="sJ14y"> =&gt;</span><span class="sAklC"> {
</span></span><span class="line" line="5"><span class="sJ14y">    const</span><span class="svy0-"> allData</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> queryCollection</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">data</span><span class="sAklC">&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="6"><span class="sAklC">      .</span><span class="sdLwU">all</span><span class="s-wAU">()
</span></span><span class="line" line="7"><span class="sJ14y">    const</span><span class="svy0-"> doc</span><span class="sAklC"> =</span><span class="svy0-"> allData</span><span class="sAklC">.</span><span class="sdLwU">find</span><span class="s-wAU">(</span><span class="sLFUT">item</span><span class="sJ14y"> =&gt;</span><span class="s-wAU"> 
</span></span><span class="line" line="8"><span class="svy0-">      item</span><span class="sAklC">.</span><span class="svy0-">_path</span><span class="sAklC"> ===</span><span class="sAklC"> &#39;</span><span class="sfyAc">/link-sets</span><span class="sAklC">&#39;</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="9"><span class="svy0-">      item</span><span class="sAklC">.</span><span class="svy0-">_id</span><span class="sAklC"> ===</span><span class="sAklC"> &#39;</span><span class="sfyAc">link-sets</span><span class="sAklC">&#39;</span><span class="sAklC"> ||
</span></span><span class="line" line="10"><span class="svy0-">      item</span><span class="sAklC">.</span><span class="svy0-">path</span><span class="sAklC"> ===</span><span class="sAklC"> &#39;</span><span class="sfyAc">/link-sets</span><span class="sAklC">&#39;
</span></span><span class="line" line="11"><span class="s-wAU">    )
</span></span><span class="line" line="12"><span class="s6cf3">    return</span><span class="svy0-"> doc</span><span class="sAklC"> ||</span><span class="svy0-"> allData</span><span class="s-wAU">[</span><span class="sx098">0</span><span class="s-wAU">]
</span></span><span class="line" line="13"><span class="sAklC">  }
</span></span><span class="line" line="14"><span class="svy0-">)
</span></span><span class="line" line="15"><span class="sJ14y">const</span><span class="svy0-"> linkSets </span><span class="sAklC">=</span><span class="svy0-"> result</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">?.</span><span class="svy0-">[</span><span class="sAklC">&#39;</span><span class="sfyAc">link-sets</span><span class="sAklC">&#39;</span><span class="svy0-">] </span><span class="sAklC">||</span><span class="svy0-"> result</span><span class="sAklC">.</span><span class="svy0-">value
</span></span><span class="line" line="16"><span class="sAklC">&lt;/</span><span class="s-wAU">script</span><span class="sAklC">&gt;
</span></span></code><!--]--></pre><p><!--[-->This approach loads all data from the collection and then filters it in JavaScript, which is less efficient but works with the new API.<!--]--></p><h3 id="_34-open-graph-meta-tags-from-frontmatter"><a href="#_34-open-graph-meta-tags-from-frontmatter"><!--[-->3.4 Open Graph Meta Tags from Frontmatter<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
After the upgrade, Open Graph meta tags from the frontmatter of blog posts were no longer being processed automatically. The <code><!--[-->head<!--]--></code> section in the frontmatter was being ignored.<!--]--></p><p><!--[--><strong><!--[-->Solution:<!--]--></strong><br>
Manually process the <code><!--[-->head<!--]--></code> data from frontmatter and set meta tags using <code><!--[-->useSeoMeta()<!--]--></code> and <code><!--[-->useHead()<!--]--></code>:<!--]--></p><pre class="language-vue shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sAklC">&lt;</span><span class="s-wAU">script</span><span class="sJ14y"> setup</span><span class="sAklC">&gt;
</span></span><span class="line" line="2"><span class="sJ14y">const</span><span class="svy0-"> route </span><span class="sAklC">=</span><span class="sdLwU"> useRoute</span><span class="svy0-">()
</span></span><span class="line" line="3"><span class="sJ14y">const</span><span class="sAklC"> {</span><span class="s-wAU"> data</span><span class="sAklC">:</span><span class="svy0-"> doc </span><span class="sAklC">}</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> useAsyncData</span><span class="svy0-">(
</span></span><span class="line" line="4"><span class="sAklC">  `</span><span class="sfyAc">blog-</span><span class="sAklC">${</span><span class="svy0-">route</span><span class="sAklC">.</span><span class="svy0-">path</span><span class="sAklC">}`</span><span class="sAklC">,
</span></span><span class="line" line="5"><span class="sJ14y">  async</span><span class="sAklC"> ()</span><span class="sJ14y"> =&gt;</span><span class="sAklC"> {
</span></span><span class="line" line="6"><span class="s6cf3">    try</span><span class="sAklC"> {
</span></span><span class="line" line="7"><span class="sJ14y">      const</span><span class="svy0-"> article</span><span class="sAklC"> =</span><span class="s6cf3"> await</span><span class="sdLwU"> queryCollection</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">blog</span><span class="sAklC">&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="8"><span class="sAklC">        .</span><span class="sdLwU">path</span><span class="s-wAU">(</span><span class="svy0-">route</span><span class="sAklC">.</span><span class="svy0-">path</span><span class="s-wAU">)
</span></span><span class="line" line="9"><span class="sAklC">        .</span><span class="sdLwU">first</span><span class="s-wAU">()
</span></span><span class="line" line="10"><span class="s6cf3">      return</span><span class="svy0-"> article
</span></span><span class="line" line="11"><span class="sAklC">    }</span><span class="s6cf3"> catch</span><span class="sAklC"> {
</span></span><span class="line" line="12"><span class="s6cf3">      return</span><span class="sAklC"> null
</span></span><span class="line" line="13"><span class="sAklC">    }
</span></span><span class="line" line="14"><span class="sAklC">  }
</span></span><span class="line" line="15"><span class="svy0-">)
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span class="s6cf3">if</span><span class="svy0-"> (doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">?.</span><span class="svy0-">head) </span><span class="sAklC">{
</span></span><span class="line" line="18"><span class="sJ14y">  const</span><span class="svy0-"> head</span><span class="sAklC"> =</span><span class="svy0-"> doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">head
</span></span><span class="line" line="19"><span class="sJ14y">  const</span><span class="svy0-"> config</span><span class="sAklC"> =</span><span class="sdLwU"> useRuntimeConfig</span><span class="s-wAU">()
</span></span><span class="line" line="20"><span class="sJ14y">  const</span><span class="svy0-"> baseURL</span><span class="sAklC"> =</span><span class="svy0-"> config</span><span class="sAklC">.</span><span class="svy0-">public</span><span class="sAklC">.</span><span class="svy0-">baseURL</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="21"><span class="svy0-">                  config</span><span class="sAklC">.</span><span class="svy0-">app</span><span class="sAklC">?.</span><span class="svy0-">baseURL</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="22"><span class="sAklC">                  &#39;</span><span class="sfyAc">https://mjkatgithub.github.io</span><span class="sAklC">&#39;
</span></span><span class="line" line="23"><span emptylineplaceholder="true">
</span></span><span class="line" line="24"><span class="s0_hs">  // Extract meta tags
</span></span><span class="line" line="25"><span class="sJ14y">  const</span><span class="svy0-"> metaTags</span><span class="sAklC"> =</span><span class="svy0-"> head</span><span class="sAklC">.</span><span class="svy0-">meta</span><span class="sAklC"> ||</span><span class="s-wAU"> []
</span></span><span class="line" line="26"><span class="sJ14y">  const</span><span class="svy0-"> ogTags</span><span class="sAklC"> =</span><span class="sAklC"> {}
</span></span><span class="line" line="27"><span class="sJ14y">  const</span><span class="svy0-"> twitterTags</span><span class="sAklC"> =</span><span class="sAklC"> {}
</span></span><span class="line" line="28"><span class="sJ14y">  const</span><span class="svy0-"> otherMeta</span><span class="sAklC"> =</span><span class="s-wAU"> []
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span class="svy0-">  metaTags</span><span class="sAklC">.</span><span class="sdLwU">forEach</span><span class="s-wAU">(</span><span class="sAklC">(</span><span class="sLFUT">tag</span><span class="sAklC">)</span><span class="sJ14y"> =&gt;</span><span class="sAklC"> {
</span></span><span class="line" line="31"><span class="sJ14y">    const</span><span class="svy0-"> tagName</span><span class="sAklC"> =</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">property</span><span class="sAklC"> ||</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">name
</span></span><span class="line" line="32"><span class="s-wAU">    
</span></span><span class="line" line="33"><span class="s6cf3">    if</span><span class="s-wAU"> (</span><span class="svy0-">tagName</span><span class="sAklC">?.</span><span class="sdLwU">startsWith</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">og:</span><span class="sAklC">&#39;</span><span class="s-wAU">)) </span><span class="sAklC">{
</span></span><span class="line" line="34"><span class="sJ14y">      const</span><span class="svy0-"> key</span><span class="sAklC"> =</span><span class="svy0-"> tagName</span><span class="sAklC">.</span><span class="sdLwU">replace</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">og:</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="sAklC"> &#39;&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="35"><span class="svy0-">      ogTags</span><span class="s-wAU">[</span><span class="svy0-">key</span><span class="s-wAU">] </span><span class="sAklC">=</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">content
</span></span><span class="line" line="36"><span class="sAklC">    }</span><span class="s6cf3"> else</span><span class="s6cf3"> if</span><span class="s-wAU"> (</span><span class="svy0-">tagName</span><span class="sAklC">?.</span><span class="sdLwU">startsWith</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">twitter:</span><span class="sAklC">&#39;</span><span class="s-wAU">)) </span><span class="sAklC">{
</span></span><span class="line" line="37"><span class="sJ14y">      const</span><span class="svy0-"> key</span><span class="sAklC"> =</span><span class="svy0-"> tagName</span><span class="sAklC">.</span><span class="sdLwU">replace</span><span class="s-wAU">(</span><span class="sAklC">&#39;</span><span class="sfyAc">twitter:</span><span class="sAklC">&#39;</span><span class="sAklC">,</span><span class="sAklC"> &#39;&#39;</span><span class="s-wAU">)
</span></span><span class="line" line="38"><span class="svy0-">      twitterTags</span><span class="s-wAU">[</span><span class="svy0-">key</span><span class="s-wAU">] </span><span class="sAklC">=</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">content
</span></span><span class="line" line="39"><span class="sAklC">    }</span><span class="s6cf3"> else</span><span class="s6cf3"> if</span><span class="s-wAU"> (</span><span class="svy0-">tagName</span><span class="s-wAU">) </span><span class="sAklC">{
</span></span><span class="line" line="40"><span class="sJ14y">      const</span><span class="svy0-"> metaTag</span><span class="sAklC"> =</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">property</span><span class="s-wAU"> 
</span></span><span class="line" line="41"><span class="sAklC">        ?</span><span class="sAklC"> {</span><span class="s-wAU"> property</span><span class="sAklC">:</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">property</span><span class="sAklC">,</span><span class="s-wAU"> content</span><span class="sAklC">:</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">content</span><span class="sAklC"> }
</span></span><span class="line" line="42"><span class="sAklC">        :</span><span class="sAklC"> {</span><span class="s-wAU"> name</span><span class="sAklC">:</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">name</span><span class="sAklC">,</span><span class="s-wAU"> content</span><span class="sAklC">:</span><span class="svy0-"> tag</span><span class="sAklC">.</span><span class="svy0-">content</span><span class="sAklC"> }
</span></span><span class="line" line="43"><span class="svy0-">      otherMeta</span><span class="sAklC">.</span><span class="sdLwU">push</span><span class="s-wAU">(</span><span class="svy0-">metaTag</span><span class="s-wAU">)
</span></span><span class="line" line="44"><span class="sAklC">    }
</span></span><span class="line" line="45"><span class="sAklC">  }</span><span class="s-wAU">)
</span></span><span class="line" line="46"><span emptylineplaceholder="true">
</span></span><span class="line" line="47"><span class="s0_hs">  // Set SEO meta tags
</span></span><span class="line" line="48"><span class="sdLwU">  useSeoMeta</span><span class="s-wAU">(</span><span class="sAklC">{
</span></span><span class="line" line="49"><span class="s-wAU">    title</span><span class="sAklC">:</span><span class="svy0-"> doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="svy0-"> ogTags</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="50"><span class="s-wAU">    description</span><span class="sAklC">:</span><span class="svy0-"> doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="51"><span class="svy0-">                 ogTags</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="52"><span class="s-wAU">    ogTitle</span><span class="sAklC">:</span><span class="svy0-"> ogTags</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="svy0-"> doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="53"><span class="s-wAU">    ogDescription</span><span class="sAklC">:</span><span class="svy0-"> ogTags</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="54"><span class="svy0-">                   doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="55"><span class="s-wAU">    ogImage</span><span class="sAklC">:</span><span class="svy0-"> ogTags</span><span class="sAklC">.</span><span class="svy0-">image</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="56"><span class="s-wAU">    ogUrl</span><span class="sAklC">:</span><span class="svy0-"> ogTags</span><span class="sAklC">.</span><span class="svy0-">url</span><span class="sAklC"> ||</span><span class="sAklC"> `${</span><span class="svy0-">baseURL</span><span class="sAklC">}${</span><span class="svy0-">route</span><span class="sAklC">.</span><span class="svy0-">path</span><span class="sAklC">}`</span><span class="sAklC">,
</span></span><span class="line" line="57"><span class="s-wAU">    twitterTitle</span><span class="sAklC">:</span><span class="svy0-"> twitterTags</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="58"><span class="svy0-">                  ogTags</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="59"><span class="svy0-">                  doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">title</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="60"><span class="s-wAU">    twitterDescription</span><span class="sAklC">:</span><span class="svy0-"> twitterTags</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="61"><span class="svy0-">                        ogTags</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="s-wAU"> 
</span></span><span class="line" line="62"><span class="svy0-">                        doc</span><span class="sAklC">.</span><span class="svy0-">value</span><span class="sAklC">.</span><span class="svy0-">description</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="63"><span class="s-wAU">    twitterImage</span><span class="sAklC">:</span><span class="svy0-"> twitterTags</span><span class="sAklC">.</span><span class="svy0-">image</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;&#39;</span><span class="sAklC">,
</span></span><span class="line" line="64"><span class="s-wAU">    twitterCard</span><span class="sAklC">:</span><span class="svy0-"> twitterTags</span><span class="sAklC">.</span><span class="svy0-">card</span><span class="sAklC"> ||</span><span class="sAklC"> &#39;</span><span class="sfyAc">summary</span><span class="sAklC">&#39;
</span></span><span class="line" line="65"><span class="sAklC">  }</span><span class="s-wAU">)
</span></span><span class="line" line="66"><span emptylineplaceholder="true">
</span></span><span class="line" line="67"><span class="s0_hs">  // Set additional meta tags and HTML attributes
</span></span><span class="line" line="68"><span class="sdLwU">  useHead</span><span class="s-wAU">(</span><span class="sAklC">{
</span></span><span class="line" line="69"><span class="s-wAU">    htmlAttrs</span><span class="sAklC">:</span><span class="svy0-"> head</span><span class="sAklC">.</span><span class="svy0-">htmlAttrs</span><span class="sAklC"> ||</span><span class="sAklC"> {},
</span></span><span class="line" line="70"><span class="s-wAU">    link</span><span class="sAklC">:</span><span class="svy0-"> head</span><span class="sAklC">.</span><span class="svy0-">link</span><span class="sAklC"> ||</span><span class="s-wAU"> []</span><span class="sAklC">,
</span></span><span class="line" line="71"><span class="s-wAU">    meta</span><span class="sAklC">:</span><span class="svy0-"> otherMeta
</span></span><span class="line" line="72"><span class="sAklC">  }</span><span class="s-wAU">)
</span></span><span class="line" line="73"><span class="sAklC">}
</span></span><span class="line" line="74"><span class="sAklC">&lt;/</span><span class="s-wAU">script</span><span class="sAklC">&gt;
</span></span></code><!--]--></pre><p><!--[-->This manually extracts and processes all the meta tags from the frontmatter, ensuring they&#39;re properly set in the page head.<!--]--></p><h3 id="_35-dark-mode-template-switching-issues"><a href="#_35-dark-mode-template-switching-issues"><!--[-->3.5 Dark Mode Template Switching Issues<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
After the upgrade, code boxes in blog articles had poor contrast in dark mode. More importantly, the template wasn&#39;t switching between light and dark mode properly—the <code><!--[-->dark:prose-invert<!--]--></code> class wasn&#39;t being applied when the mode changed.<!--]--></p><p><!--[--><strong><!--[-->Solution:<!--]--></strong><br>
I simplified the template by removing the dark mode variant entirely. Instead of trying to make the template switch between light and dark modes, I kept it at a single dark template:<!--]--></p><pre class="language-vue shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="sAklC">&lt;</span><span class="s-wAU">template</span><span class="sAklC">&gt;
</span></span><span class="line" line="2"><span class="sAklC">  &lt;</span><span class="s-wAU">article</span><span class="sJ14y"> class</span><span class="sAklC">=</span><span class="sAklC">&quot;</span><span class="sfyAc">prose</span><span class="sAklC">&quot;</span><span class="sAklC">&gt;
</span></span><span class="line" line="3"><span class="sAklC">    &lt;</span><span class="s-wAU">ContentRenderer</span><span class="s6cf3"> v-if</span><span class="sAklC">=</span><span class="sAklC">&quot;</span><span class="svy0-">doc</span><span class="sAklC">&quot;</span><span class="sAklC"> :</span><span class="sJ14y">value</span><span class="sAklC">=</span><span class="sAklC">&quot;</span><span class="svy0-">doc</span><span class="sAklC">&quot;</span><span class="sAklC"> /&gt;
</span></span><span class="line" line="4"><span class="sAklC">  &lt;/</span><span class="s-wAU">article</span><span class="sAklC">&gt;
</span></span><span class="line" line="5"><span class="sAklC">&lt;/</span><span class="s-wAU">template</span><span class="sAklC">&gt;
</span></span></code><!--]--></pre><p><!--[-->I also simplified the Tailwind configuration by removing the <code><!--[-->invert<!--]--></code> variant:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">// tailwind.config.ts
</span></span><span class="line" line="2"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> Config</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">tailwindcss</span><span class="sAklC">&#39;</span><span class="sAklC">;
</span></span><span class="line" line="3"><span class="s6cf3">import</span><span class="svy0-"> typography </span><span class="s6cf3">from</span><span class="sAklC"> &#39;</span><span class="sfyAc">@tailwindcss/typography</span><span class="sAklC">&#39;</span><span class="sAklC">;
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sJ14y">const</span><span class="svy0-"> config</span><span class="sAklC">:</span><span class="s5Dmg"> Config</span><span class="sAklC"> =</span><span class="sAklC"> {
</span></span><span class="line" line="6"><span class="s-wAU">  content</span><span class="sAklC">:</span><span class="svy0-"> [
</span></span><span class="line" line="7"><span class="sAklC">    &#39;</span><span class="sfyAc">./app/**/*.{vue,js,ts}</span><span class="sAklC">&#39;</span><span class="sAklC">,
</span></span><span class="line" line="8"><span class="sAklC">    &#39;</span><span class="sfyAc">./content/**/*.{md,yaml,json}</span><span class="sAklC">&#39;</span><span class="sAklC">,
</span></span><span class="line" line="9"><span class="svy0-">  ]</span><span class="sAklC">,
</span></span><span class="line" line="10"><span class="s-wAU">  plugins</span><span class="sAklC">:</span><span class="svy0-"> [
</span></span><span class="line" line="11"><span class="svy0-">    typography</span><span class="sAklC">,
</span></span><span class="line" line="12"><span class="svy0-">  ]</span><span class="sAklC">,
</span></span><span class="line" line="13"><span class="s-wAU">  theme</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="14"><span class="s-wAU">    extend</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="15"><span class="s-wAU">      typography</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="16"><span class="s-wAU">        DEFAULT</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="17"><span class="s-wAU">          css</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="18"><span class="s-wAU">            maxWidth</span><span class="sAklC">:</span><span class="sAklC"> &#39;</span><span class="sfyAc">none</span><span class="sAklC">&#39;</span><span class="sAklC">,
</span></span><span class="line" line="19"><span class="sAklC">          },
</span></span><span class="line" line="20"><span class="sAklC">        },
</span></span><span class="line" line="21"><span class="sAklC">      },
</span></span><span class="line" line="22"><span class="sAklC">    },
</span></span><span class="line" line="23"><span class="sAklC">  },
</span></span><span class="line" line="24"><span class="sAklC">};
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="svy0-"> config</span><span class="sAklC">;
</span></span></code><!--]--></pre><p><!--[-->This is a workaround rather than a proper fix, but it solved the immediate problem. The root cause was that the template switching mechanism wasn&#39;t working correctly after the upgrade, and rather than spending more time debugging it, I chose to simplify.<!--]--></p><h3 id="_36-test-configuration-updates-linxz"><a href="#_36-test-configuration-updates-linxz"><!--[-->3.6 Test Configuration Updates (Linxz)<!--]--></a></h3><p><!--[--><strong><!--[-->Problem:<!--]--></strong><br>
After moving the project structure to the <code><!--[-->app/<!--]--></code> directory, tests started failing because import paths were incorrect. The Vitest aliases needed to be updated, and server imports needed to use <code><!--[-->~~/server<!--]--></code> instead of <code><!--[-->~/server<!--]--></code>.<!--]--></p><p><!--[--><strong><!--[-->Solution:<!--]--></strong><br>
Update <code><!--[-->vitest.config.ts<!--]--></code> to point aliases to the <code><!--[-->app/<!--]--></code> directory:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> defineVitestConfig</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">@nuxt/test-utils/config</span><span class="sAklC">&#39;
</span></span><span class="line" line="2"><span class="s6cf3">import</span><span class="svy0-"> path </span><span class="s6cf3">from</span><span class="sAklC"> &#39;</span><span class="sfyAc">path</span><span class="sAklC">&#39;
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="s6cf3">export</span><span class="s6cf3"> default</span><span class="sdLwU"> defineVitestConfig</span><span class="svy0-">(</span><span class="sAklC">{
</span></span><span class="line" line="5"><span class="s-wAU">  resolve</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="6"><span class="s-wAU">    alias</span><span class="sAklC">:</span><span class="sAklC"> {
</span></span><span class="line" line="7"><span class="sAklC">      &#39;</span><span class="s-wAU">~</span><span class="sAklC">&#39;</span><span class="sAklC">:</span><span class="svy0-"> path</span><span class="sAklC">.</span><span class="sdLwU">resolve</span><span class="svy0-">(__dirname</span><span class="sAklC">,</span><span class="sAklC"> &#39;</span><span class="sfyAc">./app</span><span class="sAklC">&#39;</span><span class="svy0-">)</span><span class="sAklC">,
</span></span><span class="line" line="8"><span class="sAklC">      &#39;</span><span class="s-wAU">@</span><span class="sAklC">&#39;</span><span class="sAklC">:</span><span class="svy0-"> path</span><span class="sAklC">.</span><span class="sdLwU">resolve</span><span class="svy0-">(__dirname</span><span class="sAklC">,</span><span class="sAklC"> &#39;</span><span class="sfyAc">./app</span><span class="sAklC">&#39;</span><span class="svy0-">)</span><span class="sAklC">,
</span></span><span class="line" line="9"><span class="sAklC">    }
</span></span><span class="line" line="10"><span class="sAklC">  }
</span></span><span class="line" line="11"><span class="sAklC">}</span><span class="svy0-">)
</span></span></code><!--]--></pre><p><!--[-->Update test files to use <code><!--[-->~~/server<!--]--></code> for server imports:<!--]--></p><pre class="language-ts shiki shiki-themes material-theme" style=""><!--[--><code><span class="line" line="1"><span class="s0_hs">// Old
</span></span><span class="line" line="2"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~/server/utils</span><span class="sAklC">&#39;
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="s0_hs">// New
</span></span><span class="line" line="5"><span class="s6cf3">import</span><span class="sAklC"> {</span><span class="svy0-"> something</span><span class="sAklC"> }</span><span class="s6cf3"> from</span><span class="sAklC"> &#39;</span><span class="sfyAc">~~/server/utils</span><span class="sAklC">&#39;
</span></span></code><!--]--></pre><p><!--[-->After these changes, all 313 tests in the Linxz project passed successfully.<!--]--></p><h2 id="_4-conclusion"><a href="#_4-conclusion"><!--[-->4. Conclusion<!--]--></a></h2><h3 id="summary-of-my-experience"><a href="#summary-of-my-experience"><!--[-->Summary of my experience<!--]--></a></h3><p><!--[-->Upgrading from Nuxt 3 to Nuxt 4 was more challenging than I initially expected. Even though two of my three projects were already configured to be &quot;Nuxt 4 ready,&quot; I still encountered several issues that required fixes and workarounds.<!--]--></p><p><!--[-->The most significant challenges came from:<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Nuxt Content 3.x breaking changes<!--]--></strong> - The API changes required refactoring data collection queries<!--]--></li><li><!--[--><strong><!--[-->Open Graph metadata<!--]--></strong> - Manual processing of frontmatter head data became necessary<!--]--></li><li><!--[--><strong><!--[-->Dark mode template switching<!--]--></strong> - Simplified to a single template as a workaround<!--]--></li><li><!--[--><strong><!--[-->TypeScript configuration<!--]--></strong> - Required explicit type references<!--]--></li><!--]--></ol><p><!--[-->The Linxz project, which required a full structural migration, was actually the smoothest part of the upgrade. The folder structure changes were straightforward, and all tests passed after updating the import paths.<!--]--></p><h3 id="recommendations-for-others"><a href="#recommendations-for-others"><!--[-->Recommendations for others<!--]--></a></h3><ul><!--[--><li><!--[--><strong><!--[-->Read the documentation first<!--]--></strong> - Even if your project is &quot;Nuxt 4 ready,&quot; read the upgrade guide. You might encounter issues you didn&#39;t expect.<!--]--></li><li><!--[--><strong><!--[-->Test thoroughly after each change<!--]--></strong> - Don&#39;t assume everything will work just because dependencies updated successfully.<!--]--></li><li><!--[--><strong><!--[-->Be prepared for Nuxt Content 3.x changes<!--]--></strong> - If you&#39;re using Nuxt Content, the API changes are significant and will require code updates.<!--]--></li><li><!--[--><strong><!--[-->Check your TypeScript configuration<!--]--></strong> - The <code><!--[-->defineNuxtConfig<!--]--></code> error is common and easily fixed, but it&#39;s worth knowing about upfront.<!--]--></li><li><!--[--><strong><!--[-->Consider workarounds vs. proper fixes<!--]--></strong> - Sometimes a workaround (like simplifying the dark mode template) is acceptable if it solves the problem and doesn&#39;t impact functionality significantly.<!--]--></li><!--]--></ul><h3 id="what-i-would-do-differently-next-time"><a href="#what-i-would-do-differently-next-time"><!--[-->What I would do differently next time<!--]--></a></h3><ul><!--[--><li><!--[--><strong><!--[-->Read the documentation before starting<!--]--></strong> - I should have consulted the Nuxt 4 upgrade guide first, even though I thought I didn&#39;t need to. This would have prepared me better for the Nuxt Content 3.x API changes.<!--]--></li><li><!--[--><strong><!--[-->Investigate the root cause of dark mode issues<!--]--></strong> - Rather than simplifying to a workaround, I could have spent more time debugging why the template switching wasn&#39;t working. However, the workaround works fine for now.<!--]--></li><!--]--></ul><p><!--[--><strong><!--[-->Final thoughts:<!--]--></strong><br>
The upgrade to Nuxt 4 is not just worth it—it&#39;s necessary. With Nuxt 3 reaching end of life in January 2026, staying on Nuxt 3 means missing out on security updates and long-term support. The migration path is generally smoother than the Nuxt 2→3 migration, and the new features and improvements are significant. However, don&#39;t underestimate the work involved, especially if you&#39;re using Nuxt Content or have complex configurations. With a bit of patience and systematic problem-solving, you&#39;ll end up with a codebase that&#39;s ready for the future.<!--]--></p><p><!--[-->Good luck with your own upgrade!<!--]--></p><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s6cf3, html code.shiki .s6cf3{--shiki-default:#89DDFF;--shiki-default-font-style:italic}html pre.shiki code .sdLwU, html code.shiki .sdLwU{--shiki-default:#82AAFF}html pre.shiki code .svy0-, html code.shiki .svy0-{--shiki-default:#EEFFFF}html pre.shiki code .sAklC, html code.shiki .sAklC{--shiki-default:#89DDFF}html pre.shiki code .s0_hs, html code.shiki .s0_hs{--shiki-default:#546E7A;--shiki-default-font-style:italic}html pre.shiki code .s-wAU, html code.shiki .s-wAU{--shiki-default:#F07178}html pre.shiki code .sfyAc, html code.shiki .sfyAc{--shiki-default:#C3E88D}html pre.shiki code .st21m, html code.shiki .st21m{--shiki-default:#F07178;--shiki-default-font-style:italic}html pre.shiki code .sVyDW, html code.shiki .sVyDW{--shiki-default:#C792EA;--shiki-default-font-style:italic}html pre.shiki code .swXnL, html code.shiki .swXnL{--shiki-default:#C3E88D;--shiki-default-font-style:italic}html pre.shiki code .sJ14y, html code.shiki .sJ14y{--shiki-default:#C792EA}html pre.shiki code .s5Dmg, html code.shiki .s5Dmg{--shiki-default:#FFCB6B}html pre.shiki code .sLFUT, html code.shiki .sLFUT{--shiki-default:#EEFFFF;--shiki-default-font-style:italic}html pre.shiki code .sx098, html code.shiki .sx098{--shiki-default:#F78C6C}</style></div></article></div><footer data-v-3e31ebce><span data-v-3e31ebce>© by Melchior Jascha Kannengießer</span></footer></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/2025/upgrade-nuxt-3-to-nuxt-4/_payload.json?3cde5678-4073-4ead-b124-b7ee462da61d">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"prerenderedAt":8},["Reactive",2],{},["Set"],["ShallowReactive",5],{"blog-/blog/2025/upgrade-nuxt-3-to-nuxt-4":-1},true,"/blog/2025/upgrade-nuxt-3-to-nuxt-4",1767011391395]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{wsUrl:""}},app:{baseURL:"/",buildId:"3cde5678-4073-4ead-b124-b7ee462da61d",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>