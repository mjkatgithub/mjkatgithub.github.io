[{"data":1,"prerenderedAt":3985},["ShallowReactive",2],{"blog-/blog/2025/upgrade-nuxt-3-to-nuxt-4":3},{"id":4,"title":5,"body":6,"categories":3932,"date":3934,"description":3935,"draft":3936,"excerpt":3937,"extension":3938,"head":3939,"meta":3977,"navigation":804,"path":3979,"seo":3980,"stem":3981,"tags":3982,"__hash__":3984},"blog/blog/2025/upgrade-nuxt-3-to-nuxt-4.md","Upgrading from Nuxt 3 to Nuxt 4",{"type":7,"value":8,"toc":3910},"minimark",[9,13,17,20,23,26,31,38,41,58,61,64,80,87,90,94,99,106,111,130,139,148,151,154,251,254,257,273,276,285,291,295,298,306,317,422,429,435,479,483,492,555,565,627,634,638,645,650,656,726,729,758,763,775,825,836,880,899,962,971,1088,1095,1150,1153,1161,1165,1168,1177,1180,1284,1294,1453,1456,1460,1463,1467,1478,1484,1494,1541,1547,1595,1598,1602,1613,1628,1636,1639,1664,1667,1671,1678,1684,1690,1702,1968,1971,1975,1986,2002,3199,3202,3206,3217,3224,3312,3319,3556,3559,3563,3579,3591,3736,3741,3793,3796,3800,3804,3807,3810,3836,3839,3843,3877,3881,3895,3903,3906],[10,11,5],"h1",{"id":12},"upgrading-from-nuxt-3-to-nuxt-4",[14,15,16],"p",{},"It's Christmas time, so I have time to code. Nuxt 3 reaches its end of life in January 2026, and Nuxt 4 is the new kid on the block. So I decided to upgrade my projects to Nuxt 4. Since my blog is already configured to be Nuxt 4 ready and it's just a simple blog with some markdown files, it should be a no-brainer, right?",[14,18,19],{},"Well, as it turns out, even projects that are already \"Nuxt 4 ready\" can throw unexpected challenges at you. In this blog post, I'll document my experience upgrading three projects to Nuxt 4: my personal blog (already Nuxt 4 ready), a web business card/gallery project (also already Nuxt 4 ready), and Linxz—a more complex application that required a full migration.",[14,21,22],{},"The irony? Most of the issues I encountered were with the projects that were supposedly already ready for Nuxt 4. This upgrade wasn't just about updating dependencies—it involved dealing with breaking changes in Nuxt Content 3.x, fixing TypeScript configuration issues, and working around problems with dark mode templates and Open Graph metadata.",[14,24,25],{},"In this post, I'll walk you through the entire process, including the challenges I faced and how I solved them. Whether you're upgrading a single project or multiple projects like I did, I hope this honest account will help you avoid some of the pitfalls I encountered.",[27,28,30],"h2",{"id":29},"_1-preparation","1. Preparation",[14,32,33,34,37],{},"Before jumping into the actual upgrade, I wanted to make sure I had a safe environment to experiment in. Since all my projects are already hosted on GitHub, I didn't need a separate backup—version control has that covered.",[35,36],"br",{},"\nIf you're not using Git, it's a good idea to create a manual backup of your project folder before starting, just to be safe.",[14,39,40],{},"I created new branches specifically for the migration in each project:",[42,43,48],"pre",{"className":44,"code":45,"language":46,"meta":47,"style":47},"language-sh shiki shiki-themes material-theme","git checkout -b upgrade/nuxt4\n","sh","",[49,50,51],"code",{"__ignoreMap":47},[52,53,56],"span",{"class":54,"line":55},"line",1,[52,57,45],{},[14,59,60],{},"This allows me to work on the Nuxt 4 upgrade without touching the production code. If anything goes wrong, I can always fall back to the main branch or review the commit history.",[14,62,63],{},"If you're using Git on Windows and don't have access to a Bash shell, the command above should still work in PowerShell or your Git GUI. If you're not using Git at all, simply duplicate your project folder manually and work on the copy.",[14,65,66,70,71,79],{},[67,68,69],"strong",{},"A confession:"," At this stage, I should have started looking into the official ",[72,73,78],"a",{"href":74,"rel":75,":target":77},"https://nuxt.com/docs/getting-started/upgrade#nuxt-3-to-nuxt-4",[76],"nofollow","_blank","Nuxt 4 upgrade guide",". But I didn't. Why? Because I thought it would be a no-brainer—after all, two of my three projects were already configured to be Nuxt 4 ready. I figured I'd just update the dependencies and be done with it.",[14,81,82,83,86],{},"As you'll see, that assumption was wrong. Even projects that are \"Nuxt 4 ready\" can have issues when you actually upgrade to Nuxt 4. So my first piece of advice: ",[67,84,85],{},"Read the documentation first",", even if you think you don't need to.",[14,88,89],{},"Finally, I listed all major dependencies in each project and began checking whether they needed updates or if replacements were needed.",[27,91,93],{"id":92},"_2-migration","2. Migration",[95,96,98],"h3",{"id":97},"_21-updating-dependencies","2.1 Updating Dependencies",[14,100,101,102,105],{},"The first step in the actual upgrade process is to update the project dependencies. Since Nuxt 4 is the latest major version, the main change is updating the ",[49,103,104],{},"nuxt"," package itself. However, you may also need to update related modules and Nuxt Content if you're using it.",[14,107,108],{},[67,109,110],{},"How do you know which dependencies need to be updated?",[14,112,113,114,117,118,121,122,125,126,129],{},"Start by opening your ",[49,115,116],{},"package.json"," and making a list of all packages under ",[49,119,120],{},"dependencies"," and ",[49,123,124],{},"devDependencies",". For each package, check the official documentation or GitHub repository to see if it supports Nuxt 4. The ",[72,127,78],{"href":74,"rel":128},[76]," is a great starting point.",[14,131,132,133,138],{},"You can also use tools like ",[72,134,137],{"href":135,"rel":136},"https://www.npmjs.com/package/npm-check-updates",[76],"npm-check-updates"," to quickly see which of your dependencies have newer versions available:",[42,140,142],{"className":44,"code":141,"language":46,"meta":47,"style":47},"npx npm-check-updates\n",[49,143,144],{"__ignoreMap":47},[52,145,146],{"class":54,"line":55},[52,147,141],{},[14,149,150],{},"However, always double-check compatibility manually, as not every update is Nuxt 4-ready.",[14,152,153],{},"In my projects, I identified the following dependencies that needed updates:",[155,156,157,173],"table",{},[158,159,160],"thead",{},[161,162,163,167,170],"tr",{},[164,165,166],"th",{},"Package",[164,168,169],{},"Status in Nuxt 4",[164,171,172],{},"Recommendation",[174,175,176,190,204,215,224,233,242],"tbody",{},[161,177,178,181,184],{},[179,180,104],"td",{},[179,182,183],{},"❌ Needs update",[179,185,186,187],{},"Update to ",[49,188,189],{},"nuxt@^4.0.0",[161,191,192,195,198],{},[179,193,194],{},"@nuxt/content",[179,196,197],{},"⚠️  Major version change",[179,199,186,200,203],{},[49,201,202],{},"@nuxt/content@^3.0.0"," (breaking changes!)",[161,205,206,209,212],{},[179,207,208],{},"@pinia/nuxt",[179,210,211],{},"✅ Compatible",[179,213,214],{},"Update to latest version",[161,216,217,220,222],{},[179,218,219],{},"@prisma/nuxt",[179,221,211],{},[179,223,214],{},[161,225,226,229,231],{},[179,227,228],{},"@nuxtjs/tailwindcss",[179,230,211],{},[179,232,214],{},[161,234,235,238,240],{},[179,236,237],{},"@nuxt/eslint",[179,239,211],{},[179,241,214],{},[161,243,244,247,249],{},[179,245,246],{},"@nuxt/test-utils",[179,248,211],{},[179,250,214],{},[14,252,253],{},"The most significant change was Nuxt Content, which jumped from version 2.x to 3.x. This introduced breaking changes in the API that I'll discuss in more detail later.",[14,255,256],{},"To update the dependencies, I used the following commands:",[42,258,260],{"className":44,"code":259,"language":46,"meta":47,"style":47},"npm install nuxt@latest\nnpm install @nuxt/content@latest\n",[49,261,262,267],{"__ignoreMap":47},[52,263,264],{"class":54,"line":55},[52,265,266],{},"npm install nuxt@latest\n",[52,268,270],{"class":54,"line":269},2,[52,271,272],{},"npm install @nuxt/content@latest\n",[14,274,275],{},"For the other modules, I updated them to their latest versions as well:",[42,277,279],{"className":44,"code":278,"language":46,"meta":47,"style":47},"npm install @pinia/nuxt@latest @prisma/nuxt@latest @nuxtjs/tailwindcss@latest\n",[49,280,281],{"__ignoreMap":47},[52,282,283],{"class":54,"line":55},[52,284,278],{},[14,286,287,288,290],{},"After running these commands, my ",[49,289,116],{}," files were updated and ready for the next steps in the migration.",[95,292,294],{"id":293},"_22-adapting-the-configuration","2.2 Adapting the Configuration",[14,296,297],{},"With the dependencies updated, the next step is to adapt your Nuxt configuration to match Nuxt 4's requirements. The changes are relatively minor compared to the Nuxt 2→3 migration, but there are still some important updates to make.",[299,300,302,303],"h4",{"id":301},"_221-remove-futurecompatibilityversion","2.2.1 Remove ",[49,304,305],{},"future.compatibilityVersion",[14,307,308,309,312,313,316],{},"If you had set ",[49,310,311],{},"future.compatibilityVersion: 4"," in your ",[49,314,315],{},"nuxt.config.ts"," to prepare for Nuxt 4, you can now remove it. This option is no longer needed since you're actually using Nuxt 4:",[42,318,322],{"className":319,"code":320,"language":321,"meta":47,"style":47},"language-ts shiki shiki-themes material-theme","export default defineNuxtConfig({\n  // Remove this:\n  // future: {\n  //   compatibilityVersion: 4,\n  // },\n  \n  // Keep this:\n  compatibilityDate: '2024-11-01', // Update to current date\n  // ... rest of your config\n})\n","ts",[49,323,324,345,351,357,363,369,375,381,407,413],{"__ignoreMap":47},[52,325,326,330,333,337,341],{"class":54,"line":55},[52,327,329],{"class":328},"s6cf3","export",[52,331,332],{"class":328}," default",[52,334,336],{"class":335},"sdLwU"," defineNuxtConfig",[52,338,340],{"class":339},"svy0-","(",[52,342,344],{"class":343},"sAklC","{\n",[52,346,347],{"class":54,"line":269},[52,348,350],{"class":349},"s0_hs","  // Remove this:\n",[52,352,354],{"class":54,"line":353},3,[52,355,356],{"class":349},"  // future: {\n",[52,358,360],{"class":54,"line":359},4,[52,361,362],{"class":349},"  //   compatibilityVersion: 4,\n",[52,364,366],{"class":54,"line":365},5,[52,367,368],{"class":349},"  // },\n",[52,370,372],{"class":54,"line":371},6,[52,373,374],{"class":339},"  \n",[52,376,378],{"class":54,"line":377},7,[52,379,380],{"class":349},"  // Keep this:\n",[52,382,384,388,391,394,398,401,404],{"class":54,"line":383},8,[52,385,387],{"class":386},"s-wAU","  compatibilityDate",[52,389,390],{"class":343},":",[52,392,393],{"class":343}," '",[52,395,397],{"class":396},"sfyAc","2024-11-01",[52,399,400],{"class":343},"'",[52,402,403],{"class":343},",",[52,405,406],{"class":349}," // Update to current date\n",[52,408,410],{"class":54,"line":409},9,[52,411,412],{"class":349},"  // ... rest of your config\n",[52,414,416,419],{"class":54,"line":415},10,[52,417,418],{"class":343},"}",[52,420,421],{"class":339},")\n",[299,423,425,426],{"id":424},"_222-update-compatibilitydate","2.2.2 Update ",[49,427,428],{},"compatibilityDate",[14,430,431,432,434],{},"Update the ",[49,433,428],{}," to the current date. This ensures you're using the latest Nuxt 4 features and conventions:",[42,436,438],{"className":319,"code":437,"language":321,"meta":47,"style":47},"export default defineNuxtConfig({\n  compatibilityDate: '2024-12-24', // Update to current date\n  // ... rest of your config\n})\n",[49,439,440,452,469,473],{"__ignoreMap":47},[52,441,442,444,446,448,450],{"class":54,"line":55},[52,443,329],{"class":328},[52,445,332],{"class":328},[52,447,336],{"class":335},[52,449,340],{"class":339},[52,451,344],{"class":343},[52,453,454,456,458,460,463,465,467],{"class":54,"line":269},[52,455,387],{"class":386},[52,457,390],{"class":343},[52,459,393],{"class":343},[52,461,462],{"class":396},"2024-12-24",[52,464,400],{"class":343},[52,466,403],{"class":343},[52,468,406],{"class":349},[52,470,471],{"class":54,"line":353},[52,472,412],{"class":349},[52,474,475,477],{"class":54,"line":359},[52,476,418],{"class":343},[52,478,421],{"class":339},[299,480,482],{"id":481},"_223-typescript-reference","2.2.3 TypeScript Reference",[14,484,485,486,489,490,390],{},"When using TypeScript, you might encounter an error like ",[49,487,488],{},"Cannot find name 'defineNuxtConfig'",". To fix this, add a TypeScript reference directive at the top of your ",[49,491,315],{},[42,493,495],{"className":319,"code":494,"language":321,"meta":47,"style":47},"// https://nuxt.com/docs/api/configuration/nuxt-config\n/// \u003Creference types=\"nuxt\" />\nexport default defineNuxtConfig({\n  // ... your config\n})\n",[49,496,497,502,532,544,549],{"__ignoreMap":47},[52,498,499],{"class":54,"line":55},[52,500,501],{"class":349},"// https://nuxt.com/docs/api/configuration/nuxt-config\n",[52,503,504,507,510,514,518,521,524,527,529],{"class":54,"line":269},[52,505,506],{"class":349},"/// ",[52,508,509],{"class":328},"\u003C",[52,511,513],{"class":512},"st21m","reference",[52,515,517],{"class":516},"sVyDW"," types",[52,519,520],{"class":328},"=",[52,522,523],{"class":328},"\"",[52,525,104],{"class":526},"swXnL",[52,528,523],{"class":328},[52,530,531],{"class":328}," />\n",[52,533,534,536,538,540,542],{"class":54,"line":353},[52,535,329],{"class":328},[52,537,332],{"class":328},[52,539,336],{"class":335},[52,541,340],{"class":339},[52,543,344],{"class":343},[52,545,546],{"class":54,"line":359},[52,547,548],{"class":349},"  // ... your config\n",[52,550,551,553],{"class":54,"line":365},[52,552,418],{"class":343},[52,554,421],{"class":339},[14,556,557,558,561,562,390],{},"You may also need to add ",[49,559,560],{},"\"types\": [\"nuxt\"]"," to your ",[49,563,564],{},"tsconfig.json",[42,566,570],{"className":567,"code":568,"language":569,"meta":47,"style":47},"language-json shiki shiki-themes material-theme","{\n  \"compilerOptions\": {\n    \"types\": [\"nuxt\"]\n  }\n}\n","json",[49,571,572,576,592,617,622],{"__ignoreMap":47},[52,573,574],{"class":54,"line":55},[52,575,344],{"class":343},[52,577,578,581,585,587,589],{"class":54,"line":269},[52,579,580],{"class":343},"  \"",[52,582,584],{"class":583},"sJ14y","compilerOptions",[52,586,523],{"class":343},[52,588,390],{"class":343},[52,590,591],{"class":343}," {\n",[52,593,594,597,601,603,605,608,610,612,614],{"class":54,"line":353},[52,595,596],{"class":343},"    \"",[52,598,600],{"class":599},"s5Dmg","types",[52,602,523],{"class":343},[52,604,390],{"class":343},[52,606,607],{"class":343}," [",[52,609,523],{"class":343},[52,611,104],{"class":396},[52,613,523],{"class":343},[52,615,616],{"class":343},"]\n",[52,618,619],{"class":54,"line":359},[52,620,621],{"class":343},"  }\n",[52,623,624],{"class":54,"line":365},[52,625,626],{"class":343},"}\n",[14,628,629,630,633],{},"This ensures TypeScript recognizes Nuxt's global types, including ",[49,631,632],{},"defineNuxtConfig",".",[95,635,637],{"id":636},"_23-adapting-the-project-structure-linxz-only","2.3 Adapting the Project Structure (Linxz Only)",[14,639,640,641,644],{},"For my Linxz project, which wasn't already Nuxt 4 ready, I needed to restructure the project to follow Nuxt 4's new conventions. Nuxt 4 introduces a new ",[49,642,643],{},"app/"," directory structure that organizes your application code more clearly.",[14,646,647],{},[67,648,649],{},"What needs to be moved?",[14,651,652,653,655],{},"The following directories should be moved into a new ",[49,654,643],{}," directory:",[657,658,659,669,677,685,693,701,709,717],"ul",{},[660,661,662,665,666],"li",{},[49,663,664],{},"pages/"," → ",[49,667,668],{},"app/pages/",[660,670,671,665,674],{},[49,672,673],{},"components/",[49,675,676],{},"app/components/",[660,678,679,665,682],{},[49,680,681],{},"layouts/",[49,683,684],{},"app/layouts/",[660,686,687,665,690],{},[49,688,689],{},"composables/",[49,691,692],{},"app/composables/",[660,694,695,665,698],{},[49,696,697],{},"plugins/",[49,699,700],{},"app/plugins/",[660,702,703,665,706],{},[49,704,705],{},"stores/",[49,707,708],{},"app/stores/",[660,710,711,665,714],{},[49,712,713],{},"app.vue",[49,715,716],{},"app/app.vue",[660,718,719,665,722,725],{},[49,720,721],{},"lib/",[49,723,724],{},"app/lib/"," (if you have one)",[14,727,728],{},"Directories that remain in the root:",[657,730,731,737,742,747,753],{},[660,732,733,736],{},[49,734,735],{},"server/"," (stays at root)",[660,738,739,736],{},[49,740,741],{},"public/",[660,743,744,736],{},[49,745,746],{},"tests/",[660,748,749,752],{},[49,750,751],{},"config/"," (stays at root, if you have one)",[660,754,755,752],{},[49,756,757],{},"prisma/",[14,759,760],{},[67,761,762],{},"Migration steps:",[764,765,766,772],"ol",{},[660,767,768,769,771],{},"Create the ",[49,770,643],{}," directory in your project root.",[660,773,774],{},"Move the directories:",[42,776,778],{"className":44,"code":777,"language":46,"meta":47,"style":47},"# On Linux/macOS\nmkdir app\nmv pages components layouts composables plugins stores lib app/\nmv app.vue app/\n\n# On Windows PowerShell\nmkdir app\nMove-Item pages,components,layouts,composables,plugins,stores,lib app/\nMove-Item app.vue app/\n",[49,779,780,785,790,795,800,806,811,815,820],{"__ignoreMap":47},[52,781,782],{"class":54,"line":55},[52,783,784],{},"# On Linux/macOS\n",[52,786,787],{"class":54,"line":269},[52,788,789],{},"mkdir app\n",[52,791,792],{"class":54,"line":353},[52,793,794],{},"mv pages components layouts composables plugins stores lib app/\n",[52,796,797],{"class":54,"line":359},[52,798,799],{},"mv app.vue app/\n",[52,801,802],{"class":54,"line":365},[52,803,805],{"emptyLinePlaceholder":804},true,"\n",[52,807,808],{"class":54,"line":371},[52,809,810],{},"# On Windows PowerShell\n",[52,812,813],{"class":54,"line":377},[52,814,789],{},[52,816,817],{"class":54,"line":383},[52,818,819],{},"Move-Item pages,components,layouts,composables,plugins,stores,lib app/\n",[52,821,822],{"class":54,"line":409},[52,823,824],{},"Move-Item app.vue app/\n",[764,826,827],{"start":353},[660,828,829,830,832,833,390],{},"Update ",[49,831,315],{}," to set ",[49,834,835],{},"srcDir",[42,837,839],{"className":319,"code":838,"language":321,"meta":47,"style":47},"export default defineNuxtConfig({\n  srcDir: 'app',\n  // ... rest of your config\n})\n",[49,840,841,853,870,874],{"__ignoreMap":47},[52,842,843,845,847,849,851],{"class":54,"line":55},[52,844,329],{"class":328},[52,846,332],{"class":328},[52,848,336],{"class":335},[52,850,340],{"class":339},[52,852,344],{"class":343},[52,854,855,858,860,862,865,867],{"class":54,"line":269},[52,856,857],{"class":386},"  srcDir",[52,859,390],{"class":343},[52,861,393],{"class":343},[52,863,864],{"class":396},"app",[52,866,400],{"class":343},[52,868,869],{"class":343},",\n",[52,871,872],{"class":54,"line":353},[52,873,412],{"class":349},[52,875,876,878],{"class":54,"line":359},[52,877,418],{"class":343},[52,879,421],{"class":339},[764,881,882],{"start":359},[660,883,884,885,121,888,891,892,894,895,898],{},"Update import paths for server-side code. Since ",[49,886,887],{},"~",[49,889,890],{},"@"," now point to ",[49,893,643],{},", you need to use ",[49,896,897],{},"~~"," for root-level imports:",[42,900,902],{"className":319,"code":901,"language":321,"meta":47,"style":47},"// Old (points to app/server, which doesn't exist)\nimport { something } from '~/server/utils'\n\n// New (points to root/server)\nimport { something } from '~~/server/utils'\n",[49,903,904,909,934,938,943],{"__ignoreMap":47},[52,905,906],{"class":54,"line":55},[52,907,908],{"class":349},"// Old (points to app/server, which doesn't exist)\n",[52,910,911,914,917,920,923,926,928,931],{"class":54,"line":269},[52,912,913],{"class":328},"import",[52,915,916],{"class":343}," {",[52,918,919],{"class":339}," something",[52,921,922],{"class":343}," }",[52,924,925],{"class":328}," from",[52,927,393],{"class":343},[52,929,930],{"class":396},"~/server/utils",[52,932,933],{"class":343},"'\n",[52,935,936],{"class":54,"line":353},[52,937,805],{"emptyLinePlaceholder":804},[52,939,940],{"class":54,"line":359},[52,941,942],{"class":349},"// New (points to root/server)\n",[52,944,945,947,949,951,953,955,957,960],{"class":54,"line":365},[52,946,913],{"class":328},[52,948,916],{"class":343},[52,950,919],{"class":339},[52,952,922],{"class":343},[52,954,925],{"class":328},[52,956,393],{"class":343},[52,958,959],{"class":396},"~~/server/utils",[52,961,933],{"class":343},[764,963,964],{"start":365},[660,965,966,967,970],{},"Update test configuration. If you're using Vitest, update your ",[49,968,969],{},"vitest.config.ts"," aliases:",[42,972,974],{"className":319,"code":973,"language":321,"meta":47,"style":47},"export default defineVitestConfig({\n  resolve: {\n    alias: {\n      '~': path.resolve(__dirname, './app'),\n      '@': path.resolve(__dirname, './app'),\n    }\n  }\n})\n",[49,975,976,989,998,1007,1043,1073,1078,1082],{"__ignoreMap":47},[52,977,978,980,982,985,987],{"class":54,"line":55},[52,979,329],{"class":328},[52,981,332],{"class":328},[52,983,984],{"class":335}," defineVitestConfig",[52,986,340],{"class":339},[52,988,344],{"class":343},[52,990,991,994,996],{"class":54,"line":269},[52,992,993],{"class":386},"  resolve",[52,995,390],{"class":343},[52,997,591],{"class":343},[52,999,1000,1003,1005],{"class":54,"line":353},[52,1001,1002],{"class":386},"    alias",[52,1004,390],{"class":343},[52,1006,591],{"class":343},[52,1008,1009,1012,1014,1016,1018,1021,1023,1026,1029,1031,1033,1036,1038,1041],{"class":54,"line":359},[52,1010,1011],{"class":343},"      '",[52,1013,887],{"class":386},[52,1015,400],{"class":343},[52,1017,390],{"class":343},[52,1019,1020],{"class":339}," path",[52,1022,633],{"class":343},[52,1024,1025],{"class":335},"resolve",[52,1027,1028],{"class":339},"(__dirname",[52,1030,403],{"class":343},[52,1032,393],{"class":343},[52,1034,1035],{"class":396},"./app",[52,1037,400],{"class":343},[52,1039,1040],{"class":339},")",[52,1042,869],{"class":343},[52,1044,1045,1047,1049,1051,1053,1055,1057,1059,1061,1063,1065,1067,1069,1071],{"class":54,"line":365},[52,1046,1011],{"class":343},[52,1048,890],{"class":386},[52,1050,400],{"class":343},[52,1052,390],{"class":343},[52,1054,1020],{"class":339},[52,1056,633],{"class":343},[52,1058,1025],{"class":335},[52,1060,1028],{"class":339},[52,1062,403],{"class":343},[52,1064,393],{"class":343},[52,1066,1035],{"class":396},[52,1068,400],{"class":343},[52,1070,1040],{"class":339},[52,1072,869],{"class":343},[52,1074,1075],{"class":54,"line":371},[52,1076,1077],{"class":343},"    }\n",[52,1079,1080],{"class":54,"line":377},[52,1081,621],{"class":343},[52,1083,1084,1086],{"class":54,"line":383},[52,1085,418],{"class":343},[52,1087,421],{"class":339},[14,1089,1090,1091,1094],{},"And update test files to use ",[49,1092,1093],{},"~~/server"," for server imports:",[42,1096,1098],{"className":319,"code":1097,"language":321,"meta":47,"style":47},"// Old\nimport { something } from '~/server/utils'\n\n// New\nimport { something } from '~~/server/utils'\n",[49,1099,1100,1105,1123,1127,1132],{"__ignoreMap":47},[52,1101,1102],{"class":54,"line":55},[52,1103,1104],{"class":349},"// Old\n",[52,1106,1107,1109,1111,1113,1115,1117,1119,1121],{"class":54,"line":269},[52,1108,913],{"class":328},[52,1110,916],{"class":343},[52,1112,919],{"class":339},[52,1114,922],{"class":343},[52,1116,925],{"class":328},[52,1118,393],{"class":343},[52,1120,930],{"class":396},[52,1122,933],{"class":343},[52,1124,1125],{"class":54,"line":353},[52,1126,805],{"emptyLinePlaceholder":804},[52,1128,1129],{"class":54,"line":359},[52,1130,1131],{"class":349},"// New\n",[52,1133,1134,1136,1138,1140,1142,1144,1146,1148],{"class":54,"line":365},[52,1135,913],{"class":328},[52,1137,916],{"class":343},[52,1139,919],{"class":339},[52,1141,922],{"class":343},[52,1143,925],{"class":328},[52,1145,393],{"class":343},[52,1147,959],{"class":396},[52,1149,933],{"class":343},[14,1151,1152],{},"After these changes, my Linxz project structure looked like this:",[42,1154,1159],{"className":1155,"code":1157,"language":1158},[1156],"language-text","linxz/\n├── app/\n│   ├── components/\n│   ├── layouts/\n│   ├── pages/\n│   ├── composables/\n│   ├── plugins/\n│   ├── stores/\n│   ├── lib/\n│   └── app.vue\n├── server/\n├── public/\n├── tests/\n├── config/\n├── prisma/\n├── nuxt.config.ts\n└── package.json\n","text",[49,1160,1157],{"__ignoreMap":47},[95,1162,1164],{"id":1163},"_24-nuxt-content-3x-migration","2.4 Nuxt Content 3.x Migration",[14,1166,1167],{},"One of the biggest changes in this upgrade was Nuxt Content jumping from version 2.x to 3.x. This introduced breaking changes in the API, particularly for data collections.",[14,1169,1170],{},[67,1171,1172,1173,1176],{},"The main breaking change: ",[49,1174,1175],{},".path()"," no longer works for data collections",[14,1178,1179],{},"In Nuxt Content 2.x, you could query data collections like this:",[42,1181,1183],{"className":319,"code":1182,"language":321,"meta":47,"style":47},"const { data } = await useAsyncData('links', async () => {\n  return await queryCollection('data')\n    .path('/link-sets')\n    .first()\n})\n",[49,1184,1185,1228,1249,1268,1278],{"__ignoreMap":47},[52,1186,1187,1190,1192,1195,1197,1200,1203,1206,1208,1210,1213,1215,1217,1220,1223,1226],{"class":54,"line":55},[52,1188,1189],{"class":583},"const",[52,1191,916],{"class":343},[52,1193,1194],{"class":339}," data ",[52,1196,418],{"class":343},[52,1198,1199],{"class":343}," =",[52,1201,1202],{"class":328}," await",[52,1204,1205],{"class":335}," useAsyncData",[52,1207,340],{"class":339},[52,1209,400],{"class":343},[52,1211,1212],{"class":396},"links",[52,1214,400],{"class":343},[52,1216,403],{"class":343},[52,1218,1219],{"class":583}," async",[52,1221,1222],{"class":343}," ()",[52,1224,1225],{"class":583}," =>",[52,1227,591],{"class":343},[52,1229,1230,1233,1235,1238,1240,1242,1245,1247],{"class":54,"line":269},[52,1231,1232],{"class":328},"  return",[52,1234,1202],{"class":328},[52,1236,1237],{"class":335}," queryCollection",[52,1239,340],{"class":386},[52,1241,400],{"class":343},[52,1243,1244],{"class":396},"data",[52,1246,400],{"class":343},[52,1248,421],{"class":386},[52,1250,1251,1254,1257,1259,1261,1264,1266],{"class":54,"line":353},[52,1252,1253],{"class":343},"    .",[52,1255,1256],{"class":335},"path",[52,1258,340],{"class":386},[52,1260,400],{"class":343},[52,1262,1263],{"class":396},"/link-sets",[52,1265,400],{"class":343},[52,1267,421],{"class":386},[52,1269,1270,1272,1275],{"class":54,"line":359},[52,1271,1253],{"class":343},[52,1273,1274],{"class":335},"first",[52,1276,1277],{"class":386},"()\n",[52,1279,1280,1282],{"class":54,"line":365},[52,1281,418],{"class":343},[52,1283,421],{"class":339},[14,1285,1286,1287,1289,1290,1293],{},"In Nuxt Content 3.x, ",[49,1288,1175],{}," doesn't work for data collections anymore. Instead, you need to use ",[49,1291,1292],{},".all()"," and filter manually:",[42,1295,1297],{"className":319,"code":1296,"language":321,"meta":47,"style":47},"const { data } = await useAsyncData('links', async () => {\n  const allData = await queryCollection('data')\n    .all()\n  const doc = allData.find(item => \n    item._path === '/link-sets' || \n    item._id === 'link-sets'\n  )\n  return doc\n})\n",[49,1298,1299,1333,1357,1366,1393,1417,1435,1440,1447],{"__ignoreMap":47},[52,1300,1301,1303,1305,1307,1309,1311,1313,1315,1317,1319,1321,1323,1325,1327,1329,1331],{"class":54,"line":55},[52,1302,1189],{"class":583},[52,1304,916],{"class":343},[52,1306,1194],{"class":339},[52,1308,418],{"class":343},[52,1310,1199],{"class":343},[52,1312,1202],{"class":328},[52,1314,1205],{"class":335},[52,1316,340],{"class":339},[52,1318,400],{"class":343},[52,1320,1212],{"class":396},[52,1322,400],{"class":343},[52,1324,403],{"class":343},[52,1326,1219],{"class":583},[52,1328,1222],{"class":343},[52,1330,1225],{"class":583},[52,1332,591],{"class":343},[52,1334,1335,1338,1341,1343,1345,1347,1349,1351,1353,1355],{"class":54,"line":269},[52,1336,1337],{"class":583},"  const",[52,1339,1340],{"class":339}," allData",[52,1342,1199],{"class":343},[52,1344,1202],{"class":328},[52,1346,1237],{"class":335},[52,1348,340],{"class":386},[52,1350,400],{"class":343},[52,1352,1244],{"class":396},[52,1354,400],{"class":343},[52,1356,421],{"class":386},[52,1358,1359,1361,1364],{"class":54,"line":353},[52,1360,1253],{"class":343},[52,1362,1363],{"class":335},"all",[52,1365,1277],{"class":386},[52,1367,1368,1370,1373,1375,1377,1379,1382,1384,1388,1390],{"class":54,"line":359},[52,1369,1337],{"class":583},[52,1371,1372],{"class":339}," doc",[52,1374,1199],{"class":343},[52,1376,1340],{"class":339},[52,1378,633],{"class":343},[52,1380,1381],{"class":335},"find",[52,1383,340],{"class":386},[52,1385,1387],{"class":1386},"sLFUT","item",[52,1389,1225],{"class":583},[52,1391,1392],{"class":386}," \n",[52,1394,1395,1398,1400,1403,1406,1408,1410,1412,1415],{"class":54,"line":365},[52,1396,1397],{"class":339},"    item",[52,1399,633],{"class":343},[52,1401,1402],{"class":339},"_path",[52,1404,1405],{"class":343}," ===",[52,1407,393],{"class":343},[52,1409,1263],{"class":396},[52,1411,400],{"class":343},[52,1413,1414],{"class":343}," ||",[52,1416,1392],{"class":386},[52,1418,1419,1421,1423,1426,1428,1430,1433],{"class":54,"line":371},[52,1420,1397],{"class":339},[52,1422,633],{"class":343},[52,1424,1425],{"class":339},"_id",[52,1427,1405],{"class":343},[52,1429,393],{"class":343},[52,1431,1432],{"class":396},"link-sets",[52,1434,933],{"class":343},[52,1436,1437],{"class":54,"line":377},[52,1438,1439],{"class":386},"  )\n",[52,1441,1442,1444],{"class":54,"line":383},[52,1443,1232],{"class":328},[52,1445,1446],{"class":339}," doc\n",[52,1448,1449,1451],{"class":54,"line":409},[52,1450,418],{"class":343},[52,1452,421],{"class":339},[14,1454,1455],{},"This affected my Links and Projects pages, which I'll discuss in more detail in the Challenges section.",[27,1457,1459],{"id":1458},"_3-challenges-solutions","3. Challenges & Solutions",[14,1461,1462],{},"No upgrade is ever completely smooth, and moving from Nuxt 3 to Nuxt 4 was no exception. Here are the main challenges I encountered during the process—and how I solved them:",[95,1464,1466],{"id":1465},"_31-typescript-configuration-errors","3.1 TypeScript Configuration Errors",[14,1468,1469,1472,1474,1475,1477],{},[67,1470,1471],{},"Problem:",[35,1473],{},"\nAfter updating to Nuxt 4, TypeScript complained about ",[49,1476,632],{}," not being found:",[42,1479,1482],{"className":1480,"code":1481,"language":1158},[1156],"Cannot find name 'defineNuxtConfig'. Did you mean 'defineNitroConfig'?\n",[49,1483,1481],{"__ignoreMap":47},[14,1485,1486,1489,1491,1492,390],{},[67,1487,1488],{},"Solution:",[35,1490],{},"\nAdd a TypeScript reference directive at the top of your ",[49,1493,315],{},[42,1495,1497],{"className":319,"code":1496,"language":321,"meta":47,"style":47},"/// \u003Creference types=\"nuxt\" />\nexport default defineNuxtConfig({\n  // ... your config\n})\n",[49,1498,1499,1519,1531,1535],{"__ignoreMap":47},[52,1500,1501,1503,1505,1507,1509,1511,1513,1515,1517],{"class":54,"line":55},[52,1502,506],{"class":349},[52,1504,509],{"class":328},[52,1506,513],{"class":512},[52,1508,517],{"class":516},[52,1510,520],{"class":328},[52,1512,523],{"class":328},[52,1514,104],{"class":526},[52,1516,523],{"class":328},[52,1518,531],{"class":328},[52,1520,1521,1523,1525,1527,1529],{"class":54,"line":269},[52,1522,329],{"class":328},[52,1524,332],{"class":328},[52,1526,336],{"class":335},[52,1528,340],{"class":339},[52,1530,344],{"class":343},[52,1532,1533],{"class":54,"line":353},[52,1534,548],{"class":349},[52,1536,1537,1539],{"class":54,"line":359},[52,1538,418],{"class":343},[52,1540,421],{"class":339},[14,1542,557,1543,561,1545,390],{},[49,1544,560],{},[49,1546,564],{},[42,1548,1549],{"className":567,"code":568,"language":569,"meta":47,"style":47},[49,1550,1551,1555,1567,1587,1591],{"__ignoreMap":47},[52,1552,1553],{"class":54,"line":55},[52,1554,344],{"class":343},[52,1556,1557,1559,1561,1563,1565],{"class":54,"line":269},[52,1558,580],{"class":343},[52,1560,584],{"class":583},[52,1562,523],{"class":343},[52,1564,390],{"class":343},[52,1566,591],{"class":343},[52,1568,1569,1571,1573,1575,1577,1579,1581,1583,1585],{"class":54,"line":353},[52,1570,596],{"class":343},[52,1572,600],{"class":599},[52,1574,523],{"class":343},[52,1576,390],{"class":343},[52,1578,607],{"class":343},[52,1580,523],{"class":343},[52,1582,104],{"class":396},[52,1584,523],{"class":343},[52,1586,616],{"class":343},[52,1588,1589],{"class":54,"line":359},[52,1590,621],{"class":343},[52,1592,1593],{"class":54,"line":365},[52,1594,626],{"class":343},[14,1596,1597],{},"This ensures TypeScript recognizes Nuxt's global types. The triple-slash directive is particularly important and should be placed at the very top of your config file.",[95,1599,1601],{"id":1600},"_32-baseurl-for-github-pages-windows","3.2 baseURL for GitHub Pages (Windows)",[14,1603,1604,1606,1608,1609,1612],{},[67,1605,1471],{},[35,1607],{},"\nFor the web business card project, I needed to set a ",[49,1610,1611],{},"baseURL"," for GitHub Pages deployment. The standard approach of setting environment variables doesn't work well on Windows PowerShell:",[42,1614,1616],{"className":44,"code":1615,"language":46,"meta":47,"style":47},"# This doesn't work on Windows PowerShell\nBASE_URL=/kunstkanne/ npm run generate\n",[49,1617,1618,1623],{"__ignoreMap":47},[52,1619,1620],{"class":54,"line":55},[52,1621,1622],{},"# This doesn't work on Windows PowerShell\n",[52,1624,1625],{"class":54,"line":269},[52,1626,1627],{},"BASE_URL=/kunstkanne/ npm run generate\n",[14,1629,1630,1633,1635],{},[67,1631,1632],{},"Solution (or rather, workaround):",[35,1634],{},"\nI ended up not deploying the web business card to GitHub Pages anymore. This is a workaround rather than a proper solution, but it was the path of least resistance for this particular project.",[14,1637,1638],{},"If you need to solve this properly, you could:",[764,1640,1641,1648,1657],{},[660,1642,1643,1644,1647],{},"Use ",[49,1645,1646],{},"cross-env"," to set environment variables cross-platform",[660,1649,1650,1651,1653,1654,1656],{},"Detect the npm script in ",[49,1652,315],{}," and set ",[49,1655,1611],{}," accordingly",[660,1658,1659,1660,1663],{},"Use a ",[49,1661,1662],{},".env"," file (though this affects local development too)",[14,1665,1666],{},"For now, I've documented this as an unresolved issue that I worked around rather than solved.",[95,1668,1670],{"id":1669},"_33-nuxt-content-3x-api-changes","3.3 Nuxt Content 3.x API Changes",[14,1672,1673,1675,1677],{},[67,1674,1471],{},[35,1676],{},"\nAfter upgrading to Nuxt Content 3.x, my Links and Projects pages stopped showing data. The error in the console was:",[42,1679,1682],{"className":1680,"code":1681,"language":1158},[1156],"no such column: \"path\"\n",[49,1683,1681],{"__ignoreMap":47},[14,1685,1686,1687,1689],{},"The issue was that ",[49,1688,1175],{}," no longer works for data collections in Nuxt Content 3.x.",[14,1691,1692,1694,1696,1697,1699,1700,1293],{},[67,1693,1488],{},[35,1695],{},"\nReplace ",[49,1698,1175],{}," with ",[49,1701,1292],{},[42,1703,1707],{"className":1704,"code":1705,"language":1706,"meta":47,"style":47},"language-vue shiki shiki-themes material-theme","\u003Cscript setup>\nconst { data: result } = await useAsyncData(\n  'link-sets',\n  async () => {\n    const allData = await queryCollection('data')\n      .all()\n    const doc = allData.find(item => \n      item._path === '/link-sets' || \n      item._id === 'link-sets' ||\n      item.path === '/link-sets'\n    )\n    return doc || allData[0]\n  }\n)\nconst linkSets = result.value?.['link-sets'] || result.value\n\u003C/script>\n","vue",[49,1708,1709,1722,1747,1758,1769,1792,1801,1823,1844,1863,1879,1885,1906,1911,1916,1958],{"__ignoreMap":47},[52,1710,1711,1713,1716,1719],{"class":54,"line":55},[52,1712,509],{"class":343},[52,1714,1715],{"class":386},"script",[52,1717,1718],{"class":583}," setup",[52,1720,1721],{"class":343},">\n",[52,1723,1724,1726,1728,1731,1733,1736,1738,1740,1742,1744],{"class":54,"line":269},[52,1725,1189],{"class":583},[52,1727,916],{"class":343},[52,1729,1730],{"class":386}," data",[52,1732,390],{"class":343},[52,1734,1735],{"class":339}," result ",[52,1737,418],{"class":343},[52,1739,1199],{"class":343},[52,1741,1202],{"class":328},[52,1743,1205],{"class":335},[52,1745,1746],{"class":339},"(\n",[52,1748,1749,1752,1754,1756],{"class":54,"line":353},[52,1750,1751],{"class":343},"  '",[52,1753,1432],{"class":396},[52,1755,400],{"class":343},[52,1757,869],{"class":343},[52,1759,1760,1763,1765,1767],{"class":54,"line":359},[52,1761,1762],{"class":583},"  async",[52,1764,1222],{"class":343},[52,1766,1225],{"class":583},[52,1768,591],{"class":343},[52,1770,1771,1774,1776,1778,1780,1782,1784,1786,1788,1790],{"class":54,"line":365},[52,1772,1773],{"class":583},"    const",[52,1775,1340],{"class":339},[52,1777,1199],{"class":343},[52,1779,1202],{"class":328},[52,1781,1237],{"class":335},[52,1783,340],{"class":386},[52,1785,400],{"class":343},[52,1787,1244],{"class":396},[52,1789,400],{"class":343},[52,1791,421],{"class":386},[52,1793,1794,1797,1799],{"class":54,"line":371},[52,1795,1796],{"class":343},"      .",[52,1798,1363],{"class":335},[52,1800,1277],{"class":386},[52,1802,1803,1805,1807,1809,1811,1813,1815,1817,1819,1821],{"class":54,"line":377},[52,1804,1773],{"class":583},[52,1806,1372],{"class":339},[52,1808,1199],{"class":343},[52,1810,1340],{"class":339},[52,1812,633],{"class":343},[52,1814,1381],{"class":335},[52,1816,340],{"class":386},[52,1818,1387],{"class":1386},[52,1820,1225],{"class":583},[52,1822,1392],{"class":386},[52,1824,1825,1828,1830,1832,1834,1836,1838,1840,1842],{"class":54,"line":383},[52,1826,1827],{"class":339},"      item",[52,1829,633],{"class":343},[52,1831,1402],{"class":339},[52,1833,1405],{"class":343},[52,1835,393],{"class":343},[52,1837,1263],{"class":396},[52,1839,400],{"class":343},[52,1841,1414],{"class":343},[52,1843,1392],{"class":386},[52,1845,1846,1848,1850,1852,1854,1856,1858,1860],{"class":54,"line":409},[52,1847,1827],{"class":339},[52,1849,633],{"class":343},[52,1851,1425],{"class":339},[52,1853,1405],{"class":343},[52,1855,393],{"class":343},[52,1857,1432],{"class":396},[52,1859,400],{"class":343},[52,1861,1862],{"class":343}," ||\n",[52,1864,1865,1867,1869,1871,1873,1875,1877],{"class":54,"line":415},[52,1866,1827],{"class":339},[52,1868,633],{"class":343},[52,1870,1256],{"class":339},[52,1872,1405],{"class":343},[52,1874,393],{"class":343},[52,1876,1263],{"class":396},[52,1878,933],{"class":343},[52,1880,1882],{"class":54,"line":1881},11,[52,1883,1884],{"class":386},"    )\n",[52,1886,1888,1891,1893,1895,1897,1900,1904],{"class":54,"line":1887},12,[52,1889,1890],{"class":328},"    return",[52,1892,1372],{"class":339},[52,1894,1414],{"class":343},[52,1896,1340],{"class":339},[52,1898,1899],{"class":386},"[",[52,1901,1903],{"class":1902},"sx098","0",[52,1905,616],{"class":386},[52,1907,1909],{"class":54,"line":1908},13,[52,1910,621],{"class":343},[52,1912,1914],{"class":54,"line":1913},14,[52,1915,421],{"class":339},[52,1917,1919,1921,1924,1926,1929,1931,1934,1937,1939,1941,1943,1945,1948,1951,1953,1955],{"class":54,"line":1918},15,[52,1920,1189],{"class":583},[52,1922,1923],{"class":339}," linkSets ",[52,1925,520],{"class":343},[52,1927,1928],{"class":339}," result",[52,1930,633],{"class":343},[52,1932,1933],{"class":339},"value",[52,1935,1936],{"class":343},"?.",[52,1938,1899],{"class":339},[52,1940,400],{"class":343},[52,1942,1432],{"class":396},[52,1944,400],{"class":343},[52,1946,1947],{"class":339},"] ",[52,1949,1950],{"class":343},"||",[52,1952,1928],{"class":339},[52,1954,633],{"class":343},[52,1956,1957],{"class":339},"value\n",[52,1959,1961,1964,1966],{"class":54,"line":1960},16,[52,1962,1963],{"class":343},"\u003C/",[52,1965,1715],{"class":386},[52,1967,1721],{"class":343},[14,1969,1970],{},"This approach loads all data from the collection and then filters it in JavaScript, which is less efficient but works with the new API.",[95,1972,1974],{"id":1973},"_34-open-graph-meta-tags-from-frontmatter","3.4 Open Graph Meta Tags from Frontmatter",[14,1976,1977,1979,1981,1982,1985],{},[67,1978,1471],{},[35,1980],{},"\nAfter the upgrade, Open Graph meta tags from the frontmatter of blog posts were no longer being processed automatically. The ",[49,1983,1984],{},"head"," section in the frontmatter was being ignored.",[14,1987,1988,1990,1992,1993,1995,1996,121,1999,390],{},[67,1989,1488],{},[35,1991],{},"\nManually process the ",[49,1994,1984],{}," data from frontmatter and set meta tags using ",[49,1997,1998],{},"useSeoMeta()",[49,2000,2001],{},"useHead()",[42,2003,2005],{"className":1704,"code":2004,"language":1706,"meta":47,"style":47},"\u003Cscript setup>\nconst route = useRoute()\nconst { data: doc } = await useAsyncData(\n  `blog-${route.path}`,\n  async () => {\n    try {\n      const article = await queryCollection('blog')\n        .path(route.path)\n        .first()\n      return article\n    } catch {\n      return null\n    }\n  }\n)\n\nif (doc.value?.head) {\n  const head = doc.value.head\n  const config = useRuntimeConfig()\n  const baseURL = config.public.baseURL || \n                  config.app?.baseURL || \n                  'https://mjkatgithub.github.io'\n\n  // Extract meta tags\n  const metaTags = head.meta || []\n  const ogTags = {}\n  const twitterTags = {}\n  const otherMeta = []\n\n  metaTags.forEach((tag) => {\n    const tagName = tag.property || tag.name\n    \n    if (tagName?.startsWith('og:')) {\n      const key = tagName.replace('og:', '')\n      ogTags[key] = tag.content\n    } else if (tagName?.startsWith('twitter:')) {\n      const key = tagName.replace('twitter:', '')\n      twitterTags[key] = tag.content\n    } else if (tagName) {\n      const metaTag = tag.property \n        ? { property: tag.property, content: tag.content }\n        : { name: tag.name, content: tag.content }\n      otherMeta.push(metaTag)\n    }\n  })\n\n  // Set SEO meta tags\n  useSeoMeta({\n    title: doc.value.title || ogTags.title || '',\n    description: doc.value.description || \n                 ogTags.description || '',\n    ogTitle: ogTags.title || doc.value.title || '',\n    ogDescription: ogTags.description || \n                   doc.value.description || '',\n    ogImage: ogTags.image || '',\n    ogUrl: ogTags.url || `${baseURL}${route.path}`,\n    twitterTitle: twitterTags.title || \n                  ogTags.title || \n                  doc.value.title || '',\n    twitterDescription: twitterTags.description || \n                        ogTags.description || \n                        doc.value.description || '',\n    twitterImage: twitterTags.image || '',\n    twitterCard: twitterTags.card || 'summary'\n  })\n\n  // Set additional meta tags and HTML attributes\n  useHead({\n    htmlAttrs: head.htmlAttrs || {},\n    link: head.link || [],\n    meta: otherMeta\n  })\n}\n\u003C/script>\n",[49,2006,2007,2017,2031,2054,2077,2087,2094,2119,2136,2144,2152,2162,2169,2173,2177,2181,2185,2205,2226,2241,2266,2284,2295,2300,2306,2328,2341,2353,2365,2370,2394,2421,2427,2458,2490,2512,2544,2573,2593,2611,2629,2665,2699,2717,2722,2730,2735,2741,2751,2784,2807,2823,2855,2873,2893,2914,2949,2967,2981,3001,3019,3033,3053,3073,3097,3104,3109,3115,3125,3145,3167,3178,3185,3190],{"__ignoreMap":47},[52,2008,2009,2011,2013,2015],{"class":54,"line":55},[52,2010,509],{"class":343},[52,2012,1715],{"class":386},[52,2014,1718],{"class":583},[52,2016,1721],{"class":343},[52,2018,2019,2021,2024,2026,2029],{"class":54,"line":269},[52,2020,1189],{"class":583},[52,2022,2023],{"class":339}," route ",[52,2025,520],{"class":343},[52,2027,2028],{"class":335}," useRoute",[52,2030,1277],{"class":339},[52,2032,2033,2035,2037,2039,2041,2044,2046,2048,2050,2052],{"class":54,"line":353},[52,2034,1189],{"class":583},[52,2036,916],{"class":343},[52,2038,1730],{"class":386},[52,2040,390],{"class":343},[52,2042,2043],{"class":339}," doc ",[52,2045,418],{"class":343},[52,2047,1199],{"class":343},[52,2049,1202],{"class":328},[52,2051,1205],{"class":335},[52,2053,1746],{"class":339},[52,2055,2056,2059,2062,2065,2068,2070,2072,2075],{"class":54,"line":359},[52,2057,2058],{"class":343},"  `",[52,2060,2061],{"class":396},"blog-",[52,2063,2064],{"class":343},"${",[52,2066,2067],{"class":339},"route",[52,2069,633],{"class":343},[52,2071,1256],{"class":339},[52,2073,2074],{"class":343},"}`",[52,2076,869],{"class":343},[52,2078,2079,2081,2083,2085],{"class":54,"line":365},[52,2080,1762],{"class":583},[52,2082,1222],{"class":343},[52,2084,1225],{"class":583},[52,2086,591],{"class":343},[52,2088,2089,2092],{"class":54,"line":371},[52,2090,2091],{"class":328},"    try",[52,2093,591],{"class":343},[52,2095,2096,2099,2102,2104,2106,2108,2110,2112,2115,2117],{"class":54,"line":377},[52,2097,2098],{"class":583},"      const",[52,2100,2101],{"class":339}," article",[52,2103,1199],{"class":343},[52,2105,1202],{"class":328},[52,2107,1237],{"class":335},[52,2109,340],{"class":386},[52,2111,400],{"class":343},[52,2113,2114],{"class":396},"blog",[52,2116,400],{"class":343},[52,2118,421],{"class":386},[52,2120,2121,2124,2126,2128,2130,2132,2134],{"class":54,"line":383},[52,2122,2123],{"class":343},"        .",[52,2125,1256],{"class":335},[52,2127,340],{"class":386},[52,2129,2067],{"class":339},[52,2131,633],{"class":343},[52,2133,1256],{"class":339},[52,2135,421],{"class":386},[52,2137,2138,2140,2142],{"class":54,"line":409},[52,2139,2123],{"class":343},[52,2141,1274],{"class":335},[52,2143,1277],{"class":386},[52,2145,2146,2149],{"class":54,"line":415},[52,2147,2148],{"class":328},"      return",[52,2150,2151],{"class":339}," article\n",[52,2153,2154,2157,2160],{"class":54,"line":1881},[52,2155,2156],{"class":343},"    }",[52,2158,2159],{"class":328}," catch",[52,2161,591],{"class":343},[52,2163,2164,2166],{"class":54,"line":1887},[52,2165,2148],{"class":328},[52,2167,2168],{"class":343}," null\n",[52,2170,2171],{"class":54,"line":1908},[52,2172,1077],{"class":343},[52,2174,2175],{"class":54,"line":1913},[52,2176,621],{"class":343},[52,2178,2179],{"class":54,"line":1918},[52,2180,421],{"class":339},[52,2182,2183],{"class":54,"line":1960},[52,2184,805],{"emptyLinePlaceholder":804},[52,2186,2188,2191,2194,2196,2198,2200,2203],{"class":54,"line":2187},17,[52,2189,2190],{"class":328},"if",[52,2192,2193],{"class":339}," (doc",[52,2195,633],{"class":343},[52,2197,1933],{"class":339},[52,2199,1936],{"class":343},[52,2201,2202],{"class":339},"head) ",[52,2204,344],{"class":343},[52,2206,2208,2210,2213,2215,2217,2219,2221,2223],{"class":54,"line":2207},18,[52,2209,1337],{"class":583},[52,2211,2212],{"class":339}," head",[52,2214,1199],{"class":343},[52,2216,1372],{"class":339},[52,2218,633],{"class":343},[52,2220,1933],{"class":339},[52,2222,633],{"class":343},[52,2224,2225],{"class":339},"head\n",[52,2227,2229,2231,2234,2236,2239],{"class":54,"line":2228},19,[52,2230,1337],{"class":583},[52,2232,2233],{"class":339}," config",[52,2235,1199],{"class":343},[52,2237,2238],{"class":335}," useRuntimeConfig",[52,2240,1277],{"class":386},[52,2242,2244,2246,2249,2251,2253,2255,2258,2260,2262,2264],{"class":54,"line":2243},20,[52,2245,1337],{"class":583},[52,2247,2248],{"class":339}," baseURL",[52,2250,1199],{"class":343},[52,2252,2233],{"class":339},[52,2254,633],{"class":343},[52,2256,2257],{"class":339},"public",[52,2259,633],{"class":343},[52,2261,1611],{"class":339},[52,2263,1414],{"class":343},[52,2265,1392],{"class":386},[52,2267,2269,2272,2274,2276,2278,2280,2282],{"class":54,"line":2268},21,[52,2270,2271],{"class":339},"                  config",[52,2273,633],{"class":343},[52,2275,864],{"class":339},[52,2277,1936],{"class":343},[52,2279,1611],{"class":339},[52,2281,1414],{"class":343},[52,2283,1392],{"class":386},[52,2285,2287,2290,2293],{"class":54,"line":2286},22,[52,2288,2289],{"class":343},"                  '",[52,2291,2292],{"class":396},"https://mjkatgithub.github.io",[52,2294,933],{"class":343},[52,2296,2298],{"class":54,"line":2297},23,[52,2299,805],{"emptyLinePlaceholder":804},[52,2301,2303],{"class":54,"line":2302},24,[52,2304,2305],{"class":349},"  // Extract meta tags\n",[52,2307,2309,2311,2314,2316,2318,2320,2323,2325],{"class":54,"line":2308},25,[52,2310,1337],{"class":583},[52,2312,2313],{"class":339}," metaTags",[52,2315,1199],{"class":343},[52,2317,2212],{"class":339},[52,2319,633],{"class":343},[52,2321,2322],{"class":339},"meta",[52,2324,1414],{"class":343},[52,2326,2327],{"class":386}," []\n",[52,2329,2331,2333,2336,2338],{"class":54,"line":2330},26,[52,2332,1337],{"class":583},[52,2334,2335],{"class":339}," ogTags",[52,2337,1199],{"class":343},[52,2339,2340],{"class":343}," {}\n",[52,2342,2344,2346,2349,2351],{"class":54,"line":2343},27,[52,2345,1337],{"class":583},[52,2347,2348],{"class":339}," twitterTags",[52,2350,1199],{"class":343},[52,2352,2340],{"class":343},[52,2354,2356,2358,2361,2363],{"class":54,"line":2355},28,[52,2357,1337],{"class":583},[52,2359,2360],{"class":339}," otherMeta",[52,2362,1199],{"class":343},[52,2364,2327],{"class":386},[52,2366,2368],{"class":54,"line":2367},29,[52,2369,805],{"emptyLinePlaceholder":804},[52,2371,2373,2376,2378,2381,2383,2385,2388,2390,2392],{"class":54,"line":2372},30,[52,2374,2375],{"class":339},"  metaTags",[52,2377,633],{"class":343},[52,2379,2380],{"class":335},"forEach",[52,2382,340],{"class":386},[52,2384,340],{"class":343},[52,2386,2387],{"class":1386},"tag",[52,2389,1040],{"class":343},[52,2391,1225],{"class":583},[52,2393,591],{"class":343},[52,2395,2397,2399,2402,2404,2407,2409,2412,2414,2416,2418],{"class":54,"line":2396},31,[52,2398,1773],{"class":583},[52,2400,2401],{"class":339}," tagName",[52,2403,1199],{"class":343},[52,2405,2406],{"class":339}," tag",[52,2408,633],{"class":343},[52,2410,2411],{"class":339},"property",[52,2413,1414],{"class":343},[52,2415,2406],{"class":339},[52,2417,633],{"class":343},[52,2419,2420],{"class":339},"name\n",[52,2422,2424],{"class":54,"line":2423},32,[52,2425,2426],{"class":386},"    \n",[52,2428,2430,2433,2436,2439,2441,2444,2446,2448,2451,2453,2456],{"class":54,"line":2429},33,[52,2431,2432],{"class":328},"    if",[52,2434,2435],{"class":386}," (",[52,2437,2438],{"class":339},"tagName",[52,2440,1936],{"class":343},[52,2442,2443],{"class":335},"startsWith",[52,2445,340],{"class":386},[52,2447,400],{"class":343},[52,2449,2450],{"class":396},"og:",[52,2452,400],{"class":343},[52,2454,2455],{"class":386},")) ",[52,2457,344],{"class":343},[52,2459,2461,2463,2466,2468,2470,2472,2475,2477,2479,2481,2483,2485,2488],{"class":54,"line":2460},34,[52,2462,2098],{"class":583},[52,2464,2465],{"class":339}," key",[52,2467,1199],{"class":343},[52,2469,2401],{"class":339},[52,2471,633],{"class":343},[52,2473,2474],{"class":335},"replace",[52,2476,340],{"class":386},[52,2478,400],{"class":343},[52,2480,2450],{"class":396},[52,2482,400],{"class":343},[52,2484,403],{"class":343},[52,2486,2487],{"class":343}," ''",[52,2489,421],{"class":386},[52,2491,2493,2496,2498,2501,2503,2505,2507,2509],{"class":54,"line":2492},35,[52,2494,2495],{"class":339},"      ogTags",[52,2497,1899],{"class":386},[52,2499,2500],{"class":339},"key",[52,2502,1947],{"class":386},[52,2504,520],{"class":343},[52,2506,2406],{"class":339},[52,2508,633],{"class":343},[52,2510,2511],{"class":339},"content\n",[52,2513,2515,2517,2520,2523,2525,2527,2529,2531,2533,2535,2538,2540,2542],{"class":54,"line":2514},36,[52,2516,2156],{"class":343},[52,2518,2519],{"class":328}," else",[52,2521,2522],{"class":328}," if",[52,2524,2435],{"class":386},[52,2526,2438],{"class":339},[52,2528,1936],{"class":343},[52,2530,2443],{"class":335},[52,2532,340],{"class":386},[52,2534,400],{"class":343},[52,2536,2537],{"class":396},"twitter:",[52,2539,400],{"class":343},[52,2541,2455],{"class":386},[52,2543,344],{"class":343},[52,2545,2547,2549,2551,2553,2555,2557,2559,2561,2563,2565,2567,2569,2571],{"class":54,"line":2546},37,[52,2548,2098],{"class":583},[52,2550,2465],{"class":339},[52,2552,1199],{"class":343},[52,2554,2401],{"class":339},[52,2556,633],{"class":343},[52,2558,2474],{"class":335},[52,2560,340],{"class":386},[52,2562,400],{"class":343},[52,2564,2537],{"class":396},[52,2566,400],{"class":343},[52,2568,403],{"class":343},[52,2570,2487],{"class":343},[52,2572,421],{"class":386},[52,2574,2576,2579,2581,2583,2585,2587,2589,2591],{"class":54,"line":2575},38,[52,2577,2578],{"class":339},"      twitterTags",[52,2580,1899],{"class":386},[52,2582,2500],{"class":339},[52,2584,1947],{"class":386},[52,2586,520],{"class":343},[52,2588,2406],{"class":339},[52,2590,633],{"class":343},[52,2592,2511],{"class":339},[52,2594,2596,2598,2600,2602,2604,2606,2609],{"class":54,"line":2595},39,[52,2597,2156],{"class":343},[52,2599,2519],{"class":328},[52,2601,2522],{"class":328},[52,2603,2435],{"class":386},[52,2605,2438],{"class":339},[52,2607,2608],{"class":386},") ",[52,2610,344],{"class":343},[52,2612,2614,2616,2619,2621,2623,2625,2627],{"class":54,"line":2613},40,[52,2615,2098],{"class":583},[52,2617,2618],{"class":339}," metaTag",[52,2620,1199],{"class":343},[52,2622,2406],{"class":339},[52,2624,633],{"class":343},[52,2626,2411],{"class":339},[52,2628,1392],{"class":386},[52,2630,2632,2635,2637,2640,2642,2644,2646,2648,2650,2653,2655,2657,2659,2662],{"class":54,"line":2631},41,[52,2633,2634],{"class":343},"        ?",[52,2636,916],{"class":343},[52,2638,2639],{"class":386}," property",[52,2641,390],{"class":343},[52,2643,2406],{"class":339},[52,2645,633],{"class":343},[52,2647,2411],{"class":339},[52,2649,403],{"class":343},[52,2651,2652],{"class":386}," content",[52,2654,390],{"class":343},[52,2656,2406],{"class":339},[52,2658,633],{"class":343},[52,2660,2661],{"class":339},"content",[52,2663,2664],{"class":343}," }\n",[52,2666,2668,2671,2673,2676,2678,2680,2682,2685,2687,2689,2691,2693,2695,2697],{"class":54,"line":2667},42,[52,2669,2670],{"class":343},"        :",[52,2672,916],{"class":343},[52,2674,2675],{"class":386}," name",[52,2677,390],{"class":343},[52,2679,2406],{"class":339},[52,2681,633],{"class":343},[52,2683,2684],{"class":339},"name",[52,2686,403],{"class":343},[52,2688,2652],{"class":386},[52,2690,390],{"class":343},[52,2692,2406],{"class":339},[52,2694,633],{"class":343},[52,2696,2661],{"class":339},[52,2698,2664],{"class":343},[52,2700,2702,2705,2707,2710,2712,2715],{"class":54,"line":2701},43,[52,2703,2704],{"class":339},"      otherMeta",[52,2706,633],{"class":343},[52,2708,2709],{"class":335},"push",[52,2711,340],{"class":386},[52,2713,2714],{"class":339},"metaTag",[52,2716,421],{"class":386},[52,2718,2720],{"class":54,"line":2719},44,[52,2721,1077],{"class":343},[52,2723,2725,2728],{"class":54,"line":2724},45,[52,2726,2727],{"class":343},"  }",[52,2729,421],{"class":386},[52,2731,2733],{"class":54,"line":2732},46,[52,2734,805],{"emptyLinePlaceholder":804},[52,2736,2738],{"class":54,"line":2737},47,[52,2739,2740],{"class":349},"  // Set SEO meta tags\n",[52,2742,2744,2747,2749],{"class":54,"line":2743},48,[52,2745,2746],{"class":335},"  useSeoMeta",[52,2748,340],{"class":386},[52,2750,344],{"class":343},[52,2752,2754,2757,2759,2761,2763,2765,2767,2770,2772,2774,2776,2778,2780,2782],{"class":54,"line":2753},49,[52,2755,2756],{"class":386},"    title",[52,2758,390],{"class":343},[52,2760,1372],{"class":339},[52,2762,633],{"class":343},[52,2764,1933],{"class":339},[52,2766,633],{"class":343},[52,2768,2769],{"class":339},"title",[52,2771,1414],{"class":343},[52,2773,2335],{"class":339},[52,2775,633],{"class":343},[52,2777,2769],{"class":339},[52,2779,1414],{"class":343},[52,2781,2487],{"class":343},[52,2783,869],{"class":343},[52,2785,2787,2790,2792,2794,2796,2798,2800,2803,2805],{"class":54,"line":2786},50,[52,2788,2789],{"class":386},"    description",[52,2791,390],{"class":343},[52,2793,1372],{"class":339},[52,2795,633],{"class":343},[52,2797,1933],{"class":339},[52,2799,633],{"class":343},[52,2801,2802],{"class":339},"description",[52,2804,1414],{"class":343},[52,2806,1392],{"class":386},[52,2808,2810,2813,2815,2817,2819,2821],{"class":54,"line":2809},51,[52,2811,2812],{"class":339},"                 ogTags",[52,2814,633],{"class":343},[52,2816,2802],{"class":339},[52,2818,1414],{"class":343},[52,2820,2487],{"class":343},[52,2822,869],{"class":343},[52,2824,2826,2829,2831,2833,2835,2837,2839,2841,2843,2845,2847,2849,2851,2853],{"class":54,"line":2825},52,[52,2827,2828],{"class":386},"    ogTitle",[52,2830,390],{"class":343},[52,2832,2335],{"class":339},[52,2834,633],{"class":343},[52,2836,2769],{"class":339},[52,2838,1414],{"class":343},[52,2840,1372],{"class":339},[52,2842,633],{"class":343},[52,2844,1933],{"class":339},[52,2846,633],{"class":343},[52,2848,2769],{"class":339},[52,2850,1414],{"class":343},[52,2852,2487],{"class":343},[52,2854,869],{"class":343},[52,2856,2858,2861,2863,2865,2867,2869,2871],{"class":54,"line":2857},53,[52,2859,2860],{"class":386},"    ogDescription",[52,2862,390],{"class":343},[52,2864,2335],{"class":339},[52,2866,633],{"class":343},[52,2868,2802],{"class":339},[52,2870,1414],{"class":343},[52,2872,1392],{"class":386},[52,2874,2876,2879,2881,2883,2885,2887,2889,2891],{"class":54,"line":2875},54,[52,2877,2878],{"class":339},"                   doc",[52,2880,633],{"class":343},[52,2882,1933],{"class":339},[52,2884,633],{"class":343},[52,2886,2802],{"class":339},[52,2888,1414],{"class":343},[52,2890,2487],{"class":343},[52,2892,869],{"class":343},[52,2894,2896,2899,2901,2903,2905,2908,2910,2912],{"class":54,"line":2895},55,[52,2897,2898],{"class":386},"    ogImage",[52,2900,390],{"class":343},[52,2902,2335],{"class":339},[52,2904,633],{"class":343},[52,2906,2907],{"class":339},"image",[52,2909,1414],{"class":343},[52,2911,2487],{"class":343},[52,2913,869],{"class":343},[52,2915,2917,2920,2922,2924,2926,2929,2931,2934,2936,2939,2941,2943,2945,2947],{"class":54,"line":2916},56,[52,2918,2919],{"class":386},"    ogUrl",[52,2921,390],{"class":343},[52,2923,2335],{"class":339},[52,2925,633],{"class":343},[52,2927,2928],{"class":339},"url",[52,2930,1414],{"class":343},[52,2932,2933],{"class":343}," `${",[52,2935,1611],{"class":339},[52,2937,2938],{"class":343},"}${",[52,2940,2067],{"class":339},[52,2942,633],{"class":343},[52,2944,1256],{"class":339},[52,2946,2074],{"class":343},[52,2948,869],{"class":343},[52,2950,2952,2955,2957,2959,2961,2963,2965],{"class":54,"line":2951},57,[52,2953,2954],{"class":386},"    twitterTitle",[52,2956,390],{"class":343},[52,2958,2348],{"class":339},[52,2960,633],{"class":343},[52,2962,2769],{"class":339},[52,2964,1414],{"class":343},[52,2966,1392],{"class":386},[52,2968,2970,2973,2975,2977,2979],{"class":54,"line":2969},58,[52,2971,2972],{"class":339},"                  ogTags",[52,2974,633],{"class":343},[52,2976,2769],{"class":339},[52,2978,1414],{"class":343},[52,2980,1392],{"class":386},[52,2982,2984,2987,2989,2991,2993,2995,2997,2999],{"class":54,"line":2983},59,[52,2985,2986],{"class":339},"                  doc",[52,2988,633],{"class":343},[52,2990,1933],{"class":339},[52,2992,633],{"class":343},[52,2994,2769],{"class":339},[52,2996,1414],{"class":343},[52,2998,2487],{"class":343},[52,3000,869],{"class":343},[52,3002,3004,3007,3009,3011,3013,3015,3017],{"class":54,"line":3003},60,[52,3005,3006],{"class":386},"    twitterDescription",[52,3008,390],{"class":343},[52,3010,2348],{"class":339},[52,3012,633],{"class":343},[52,3014,2802],{"class":339},[52,3016,1414],{"class":343},[52,3018,1392],{"class":386},[52,3020,3022,3025,3027,3029,3031],{"class":54,"line":3021},61,[52,3023,3024],{"class":339},"                        ogTags",[52,3026,633],{"class":343},[52,3028,2802],{"class":339},[52,3030,1414],{"class":343},[52,3032,1392],{"class":386},[52,3034,3036,3039,3041,3043,3045,3047,3049,3051],{"class":54,"line":3035},62,[52,3037,3038],{"class":339},"                        doc",[52,3040,633],{"class":343},[52,3042,1933],{"class":339},[52,3044,633],{"class":343},[52,3046,2802],{"class":339},[52,3048,1414],{"class":343},[52,3050,2487],{"class":343},[52,3052,869],{"class":343},[52,3054,3056,3059,3061,3063,3065,3067,3069,3071],{"class":54,"line":3055},63,[52,3057,3058],{"class":386},"    twitterImage",[52,3060,390],{"class":343},[52,3062,2348],{"class":339},[52,3064,633],{"class":343},[52,3066,2907],{"class":339},[52,3068,1414],{"class":343},[52,3070,2487],{"class":343},[52,3072,869],{"class":343},[52,3074,3076,3079,3081,3083,3085,3088,3090,3092,3095],{"class":54,"line":3075},64,[52,3077,3078],{"class":386},"    twitterCard",[52,3080,390],{"class":343},[52,3082,2348],{"class":339},[52,3084,633],{"class":343},[52,3086,3087],{"class":339},"card",[52,3089,1414],{"class":343},[52,3091,393],{"class":343},[52,3093,3094],{"class":396},"summary",[52,3096,933],{"class":343},[52,3098,3100,3102],{"class":54,"line":3099},65,[52,3101,2727],{"class":343},[52,3103,421],{"class":386},[52,3105,3107],{"class":54,"line":3106},66,[52,3108,805],{"emptyLinePlaceholder":804},[52,3110,3112],{"class":54,"line":3111},67,[52,3113,3114],{"class":349},"  // Set additional meta tags and HTML attributes\n",[52,3116,3118,3121,3123],{"class":54,"line":3117},68,[52,3119,3120],{"class":335},"  useHead",[52,3122,340],{"class":386},[52,3124,344],{"class":343},[52,3126,3128,3131,3133,3135,3137,3140,3142],{"class":54,"line":3127},69,[52,3129,3130],{"class":386},"    htmlAttrs",[52,3132,390],{"class":343},[52,3134,2212],{"class":339},[52,3136,633],{"class":343},[52,3138,3139],{"class":339},"htmlAttrs",[52,3141,1414],{"class":343},[52,3143,3144],{"class":343}," {},\n",[52,3146,3148,3151,3153,3155,3157,3160,3162,3165],{"class":54,"line":3147},70,[52,3149,3150],{"class":386},"    link",[52,3152,390],{"class":343},[52,3154,2212],{"class":339},[52,3156,633],{"class":343},[52,3158,3159],{"class":339},"link",[52,3161,1414],{"class":343},[52,3163,3164],{"class":386}," []",[52,3166,869],{"class":343},[52,3168,3170,3173,3175],{"class":54,"line":3169},71,[52,3171,3172],{"class":386},"    meta",[52,3174,390],{"class":343},[52,3176,3177],{"class":339}," otherMeta\n",[52,3179,3181,3183],{"class":54,"line":3180},72,[52,3182,2727],{"class":343},[52,3184,421],{"class":386},[52,3186,3188],{"class":54,"line":3187},73,[52,3189,626],{"class":343},[52,3191,3193,3195,3197],{"class":54,"line":3192},74,[52,3194,1963],{"class":343},[52,3196,1715],{"class":386},[52,3198,1721],{"class":343},[14,3200,3201],{},"This manually extracts and processes all the meta tags from the frontmatter, ensuring they're properly set in the page head.",[95,3203,3205],{"id":3204},"_35-dark-mode-template-switching-issues","3.5 Dark Mode Template Switching Issues",[14,3207,3208,3210,3212,3213,3216],{},[67,3209,1471],{},[35,3211],{},"\nAfter the upgrade, code boxes in blog articles had poor contrast in dark mode. More importantly, the template wasn't switching between light and dark mode properly—the ",[49,3214,3215],{},"dark:prose-invert"," class wasn't being applied when the mode changed.",[14,3218,3219,3221,3223],{},[67,3220,1488],{},[35,3222],{},"\nI simplified the template by removing the dark mode variant entirely. Instead of trying to make the template switch between light and dark modes, I kept it at a single dark template:",[42,3225,3227],{"className":1704,"code":3226,"language":1706,"meta":47,"style":47},"\u003Ctemplate>\n  \u003Carticle class=\"prose\">\n    \u003CContentRenderer v-if=\"doc\" :value=\"doc\" />\n  \u003C/article>\n\u003C/template>\n",[49,3228,3229,3238,3260,3295,3304],{"__ignoreMap":47},[52,3230,3231,3233,3236],{"class":54,"line":55},[52,3232,509],{"class":343},[52,3234,3235],{"class":386},"template",[52,3237,1721],{"class":343},[52,3239,3240,3243,3246,3249,3251,3253,3256,3258],{"class":54,"line":269},[52,3241,3242],{"class":343},"  \u003C",[52,3244,3245],{"class":386},"article",[52,3247,3248],{"class":583}," class",[52,3250,520],{"class":343},[52,3252,523],{"class":343},[52,3254,3255],{"class":396},"prose",[52,3257,523],{"class":343},[52,3259,1721],{"class":343},[52,3261,3262,3265,3268,3271,3273,3275,3278,3280,3283,3285,3287,3289,3291,3293],{"class":54,"line":353},[52,3263,3264],{"class":343},"    \u003C",[52,3266,3267],{"class":386},"ContentRenderer",[52,3269,3270],{"class":328}," v-if",[52,3272,520],{"class":343},[52,3274,523],{"class":343},[52,3276,3277],{"class":339},"doc",[52,3279,523],{"class":343},[52,3281,3282],{"class":343}," :",[52,3284,1933],{"class":583},[52,3286,520],{"class":343},[52,3288,523],{"class":343},[52,3290,3277],{"class":339},[52,3292,523],{"class":343},[52,3294,531],{"class":343},[52,3296,3297,3300,3302],{"class":54,"line":359},[52,3298,3299],{"class":343},"  \u003C/",[52,3301,3245],{"class":386},[52,3303,1721],{"class":343},[52,3305,3306,3308,3310],{"class":54,"line":365},[52,3307,1963],{"class":343},[52,3309,3235],{"class":386},[52,3311,1721],{"class":343},[14,3313,3314,3315,3318],{},"I also simplified the Tailwind configuration by removing the ",[49,3316,3317],{},"invert"," variant:",[42,3320,3322],{"className":319,"code":3321,"language":321,"meta":47,"style":47},"// tailwind.config.ts\nimport { Config } from 'tailwindcss';\nimport typography from '@tailwindcss/typography';\n\nconst config: Config = {\n  content: [\n    './app/**/*.{vue,js,ts}',\n    './content/**/*.{md,yaml,json}',\n  ],\n  plugins: [\n    typography,\n  ],\n  theme: {\n    extend: {\n      typography: {\n        DEFAULT: {\n          css: {\n            maxWidth: 'none',\n          },\n        },\n      },\n    },\n  },\n};\n\nexport default config;\n",[49,3323,3324,3329,3352,3371,3375,3389,3399,3411,3422,3429,3438,3445,3451,3460,3469,3478,3487,3496,3512,3517,3522,3527,3532,3537,3542,3546],{"__ignoreMap":47},[52,3325,3326],{"class":54,"line":55},[52,3327,3328],{"class":349},"// tailwind.config.ts\n",[52,3330,3331,3333,3335,3338,3340,3342,3344,3347,3349],{"class":54,"line":269},[52,3332,913],{"class":328},[52,3334,916],{"class":343},[52,3336,3337],{"class":339}," Config",[52,3339,922],{"class":343},[52,3341,925],{"class":328},[52,3343,393],{"class":343},[52,3345,3346],{"class":396},"tailwindcss",[52,3348,400],{"class":343},[52,3350,3351],{"class":343},";\n",[52,3353,3354,3356,3359,3362,3364,3367,3369],{"class":54,"line":353},[52,3355,913],{"class":328},[52,3357,3358],{"class":339}," typography ",[52,3360,3361],{"class":328},"from",[52,3363,393],{"class":343},[52,3365,3366],{"class":396},"@tailwindcss/typography",[52,3368,400],{"class":343},[52,3370,3351],{"class":343},[52,3372,3373],{"class":54,"line":359},[52,3374,805],{"emptyLinePlaceholder":804},[52,3376,3377,3379,3381,3383,3385,3387],{"class":54,"line":365},[52,3378,1189],{"class":583},[52,3380,2233],{"class":339},[52,3382,390],{"class":343},[52,3384,3337],{"class":599},[52,3386,1199],{"class":343},[52,3388,591],{"class":343},[52,3390,3391,3394,3396],{"class":54,"line":371},[52,3392,3393],{"class":386},"  content",[52,3395,390],{"class":343},[52,3397,3398],{"class":339}," [\n",[52,3400,3401,3404,3407,3409],{"class":54,"line":377},[52,3402,3403],{"class":343},"    '",[52,3405,3406],{"class":396},"./app/**/*.{vue,js,ts}",[52,3408,400],{"class":343},[52,3410,869],{"class":343},[52,3412,3413,3415,3418,3420],{"class":54,"line":383},[52,3414,3403],{"class":343},[52,3416,3417],{"class":396},"./content/**/*.{md,yaml,json}",[52,3419,400],{"class":343},[52,3421,869],{"class":343},[52,3423,3424,3427],{"class":54,"line":409},[52,3425,3426],{"class":339},"  ]",[52,3428,869],{"class":343},[52,3430,3431,3434,3436],{"class":54,"line":415},[52,3432,3433],{"class":386},"  plugins",[52,3435,390],{"class":343},[52,3437,3398],{"class":339},[52,3439,3440,3443],{"class":54,"line":1881},[52,3441,3442],{"class":339},"    typography",[52,3444,869],{"class":343},[52,3446,3447,3449],{"class":54,"line":1887},[52,3448,3426],{"class":339},[52,3450,869],{"class":343},[52,3452,3453,3456,3458],{"class":54,"line":1908},[52,3454,3455],{"class":386},"  theme",[52,3457,390],{"class":343},[52,3459,591],{"class":343},[52,3461,3462,3465,3467],{"class":54,"line":1913},[52,3463,3464],{"class":386},"    extend",[52,3466,390],{"class":343},[52,3468,591],{"class":343},[52,3470,3471,3474,3476],{"class":54,"line":1918},[52,3472,3473],{"class":386},"      typography",[52,3475,390],{"class":343},[52,3477,591],{"class":343},[52,3479,3480,3483,3485],{"class":54,"line":1960},[52,3481,3482],{"class":386},"        DEFAULT",[52,3484,390],{"class":343},[52,3486,591],{"class":343},[52,3488,3489,3492,3494],{"class":54,"line":2187},[52,3490,3491],{"class":386},"          css",[52,3493,390],{"class":343},[52,3495,591],{"class":343},[52,3497,3498,3501,3503,3505,3508,3510],{"class":54,"line":2207},[52,3499,3500],{"class":386},"            maxWidth",[52,3502,390],{"class":343},[52,3504,393],{"class":343},[52,3506,3507],{"class":396},"none",[52,3509,400],{"class":343},[52,3511,869],{"class":343},[52,3513,3514],{"class":54,"line":2228},[52,3515,3516],{"class":343},"          },\n",[52,3518,3519],{"class":54,"line":2243},[52,3520,3521],{"class":343},"        },\n",[52,3523,3524],{"class":54,"line":2268},[52,3525,3526],{"class":343},"      },\n",[52,3528,3529],{"class":54,"line":2286},[52,3530,3531],{"class":343},"    },\n",[52,3533,3534],{"class":54,"line":2297},[52,3535,3536],{"class":343},"  },\n",[52,3538,3539],{"class":54,"line":2302},[52,3540,3541],{"class":343},"};\n",[52,3543,3544],{"class":54,"line":2308},[52,3545,805],{"emptyLinePlaceholder":804},[52,3547,3548,3550,3552,3554],{"class":54,"line":2330},[52,3549,329],{"class":328},[52,3551,332],{"class":328},[52,3553,2233],{"class":339},[52,3555,3351],{"class":343},[14,3557,3558],{},"This is a workaround rather than a proper fix, but it solved the immediate problem. The root cause was that the template switching mechanism wasn't working correctly after the upgrade, and rather than spending more time debugging it, I chose to simplify.",[95,3560,3562],{"id":3561},"_36-test-configuration-updates-linxz","3.6 Test Configuration Updates (Linxz)",[14,3564,3565,3567,3569,3570,3572,3573,3575,3576,633],{},[67,3566,1471],{},[35,3568],{},"\nAfter moving the project structure to the ",[49,3571,643],{}," directory, tests started failing because import paths were incorrect. The Vitest aliases needed to be updated, and server imports needed to use ",[49,3574,1093],{}," instead of ",[49,3577,3578],{},"~/server",[14,3580,3581,3583,3585,3586,3588,3589,655],{},[67,3582,1488],{},[35,3584],{},"\nUpdate ",[49,3587,969],{}," to point aliases to the ",[49,3590,643],{},[42,3592,3594],{"className":319,"code":3593,"language":321,"meta":47,"style":47},"import { defineVitestConfig } from '@nuxt/test-utils/config'\nimport path from 'path'\n\nexport default defineVitestConfig({\n  resolve: {\n    alias: {\n      '~': path.resolve(__dirname, './app'),\n      '@': path.resolve(__dirname, './app'),\n    }\n  }\n})\n",[49,3595,3596,3615,3630,3634,3646,3654,3662,3692,3722,3726,3730],{"__ignoreMap":47},[52,3597,3598,3600,3602,3604,3606,3608,3610,3613],{"class":54,"line":55},[52,3599,913],{"class":328},[52,3601,916],{"class":343},[52,3603,984],{"class":339},[52,3605,922],{"class":343},[52,3607,925],{"class":328},[52,3609,393],{"class":343},[52,3611,3612],{"class":396},"@nuxt/test-utils/config",[52,3614,933],{"class":343},[52,3616,3617,3619,3622,3624,3626,3628],{"class":54,"line":269},[52,3618,913],{"class":328},[52,3620,3621],{"class":339}," path ",[52,3623,3361],{"class":328},[52,3625,393],{"class":343},[52,3627,1256],{"class":396},[52,3629,933],{"class":343},[52,3631,3632],{"class":54,"line":353},[52,3633,805],{"emptyLinePlaceholder":804},[52,3635,3636,3638,3640,3642,3644],{"class":54,"line":359},[52,3637,329],{"class":328},[52,3639,332],{"class":328},[52,3641,984],{"class":335},[52,3643,340],{"class":339},[52,3645,344],{"class":343},[52,3647,3648,3650,3652],{"class":54,"line":365},[52,3649,993],{"class":386},[52,3651,390],{"class":343},[52,3653,591],{"class":343},[52,3655,3656,3658,3660],{"class":54,"line":371},[52,3657,1002],{"class":386},[52,3659,390],{"class":343},[52,3661,591],{"class":343},[52,3663,3664,3666,3668,3670,3672,3674,3676,3678,3680,3682,3684,3686,3688,3690],{"class":54,"line":377},[52,3665,1011],{"class":343},[52,3667,887],{"class":386},[52,3669,400],{"class":343},[52,3671,390],{"class":343},[52,3673,1020],{"class":339},[52,3675,633],{"class":343},[52,3677,1025],{"class":335},[52,3679,1028],{"class":339},[52,3681,403],{"class":343},[52,3683,393],{"class":343},[52,3685,1035],{"class":396},[52,3687,400],{"class":343},[52,3689,1040],{"class":339},[52,3691,869],{"class":343},[52,3693,3694,3696,3698,3700,3702,3704,3706,3708,3710,3712,3714,3716,3718,3720],{"class":54,"line":383},[52,3695,1011],{"class":343},[52,3697,890],{"class":386},[52,3699,400],{"class":343},[52,3701,390],{"class":343},[52,3703,1020],{"class":339},[52,3705,633],{"class":343},[52,3707,1025],{"class":335},[52,3709,1028],{"class":339},[52,3711,403],{"class":343},[52,3713,393],{"class":343},[52,3715,1035],{"class":396},[52,3717,400],{"class":343},[52,3719,1040],{"class":339},[52,3721,869],{"class":343},[52,3723,3724],{"class":54,"line":409},[52,3725,1077],{"class":343},[52,3727,3728],{"class":54,"line":415},[52,3729,621],{"class":343},[52,3731,3732,3734],{"class":54,"line":1881},[52,3733,418],{"class":343},[52,3735,421],{"class":339},[14,3737,3738,3739,1094],{},"Update test files to use ",[49,3740,1093],{},[42,3742,3743],{"className":319,"code":1097,"language":321,"meta":47,"style":47},[49,3744,3745,3749,3767,3771,3775],{"__ignoreMap":47},[52,3746,3747],{"class":54,"line":55},[52,3748,1104],{"class":349},[52,3750,3751,3753,3755,3757,3759,3761,3763,3765],{"class":54,"line":269},[52,3752,913],{"class":328},[52,3754,916],{"class":343},[52,3756,919],{"class":339},[52,3758,922],{"class":343},[52,3760,925],{"class":328},[52,3762,393],{"class":343},[52,3764,930],{"class":396},[52,3766,933],{"class":343},[52,3768,3769],{"class":54,"line":353},[52,3770,805],{"emptyLinePlaceholder":804},[52,3772,3773],{"class":54,"line":359},[52,3774,1131],{"class":349},[52,3776,3777,3779,3781,3783,3785,3787,3789,3791],{"class":54,"line":365},[52,3778,913],{"class":328},[52,3780,916],{"class":343},[52,3782,919],{"class":339},[52,3784,922],{"class":343},[52,3786,925],{"class":328},[52,3788,393],{"class":343},[52,3790,959],{"class":396},[52,3792,933],{"class":343},[14,3794,3795],{},"After these changes, all 313 tests in the Linxz project passed successfully.",[27,3797,3799],{"id":3798},"_4-conclusion","4. Conclusion",[95,3801,3803],{"id":3802},"summary-of-my-experience","Summary of my experience",[14,3805,3806],{},"Upgrading from Nuxt 3 to Nuxt 4 was more challenging than I initially expected. Even though two of my three projects were already configured to be \"Nuxt 4 ready,\" I still encountered several issues that required fixes and workarounds.",[14,3808,3809],{},"The most significant challenges came from:",[764,3811,3812,3818,3824,3830],{},[660,3813,3814,3817],{},[67,3815,3816],{},"Nuxt Content 3.x breaking changes"," - The API changes required refactoring data collection queries",[660,3819,3820,3823],{},[67,3821,3822],{},"Open Graph metadata"," - Manual processing of frontmatter head data became necessary",[660,3825,3826,3829],{},[67,3827,3828],{},"Dark mode template switching"," - Simplified to a single template as a workaround",[660,3831,3832,3835],{},[67,3833,3834],{},"TypeScript configuration"," - Required explicit type references",[14,3837,3838],{},"The Linxz project, which required a full structural migration, was actually the smoothest part of the upgrade. The folder structure changes were straightforward, and all tests passed after updating the import paths.",[95,3840,3842],{"id":3841},"recommendations-for-others","Recommendations for others",[657,3844,3845,3850,3856,3862,3871],{},[660,3846,3847,3849],{},[67,3848,85],{}," - Even if your project is \"Nuxt 4 ready,\" read the upgrade guide. You might encounter issues you didn't expect.",[660,3851,3852,3855],{},[67,3853,3854],{},"Test thoroughly after each change"," - Don't assume everything will work just because dependencies updated successfully.",[660,3857,3858,3861],{},[67,3859,3860],{},"Be prepared for Nuxt Content 3.x changes"," - If you're using Nuxt Content, the API changes are significant and will require code updates.",[660,3863,3864,3867,3868,3870],{},[67,3865,3866],{},"Check your TypeScript configuration"," - The ",[49,3869,632],{}," error is common and easily fixed, but it's worth knowing about upfront.",[660,3872,3873,3876],{},[67,3874,3875],{},"Consider workarounds vs. proper fixes"," - Sometimes a workaround (like simplifying the dark mode template) is acceptable if it solves the problem and doesn't impact functionality significantly.",[95,3878,3880],{"id":3879},"what-i-would-do-differently-next-time","What I would do differently next time",[657,3882,3883,3889],{},[660,3884,3885,3888],{},[67,3886,3887],{},"Read the documentation before starting"," - I should have consulted the Nuxt 4 upgrade guide first, even though I thought I didn't need to. This would have prepared me better for the Nuxt Content 3.x API changes.",[660,3890,3891,3894],{},[67,3892,3893],{},"Investigate the root cause of dark mode issues"," - Rather than simplifying to a workaround, I could have spent more time debugging why the template switching wasn't working. However, the workaround works fine for now.",[14,3896,3897,3900,3902],{},[67,3898,3899],{},"Final thoughts:",[35,3901],{},"\nThe upgrade to Nuxt 4 is not just worth it—it's necessary. With Nuxt 3 reaching end of life in January 2026, staying on Nuxt 3 means missing out on security updates and long-term support. The migration path is generally smoother than the Nuxt 2→3 migration, and the new features and improvements are significant. However, don't underestimate the work involved, especially if you're using Nuxt Content or have complex configurations. With a bit of patience and systematic problem-solving, you'll end up with a codebase that's ready for the future.",[14,3904,3905],{},"Good luck with your own upgrade!",[3907,3908,3909],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s6cf3, html code.shiki .s6cf3{--shiki-default:#89DDFF;--shiki-default-font-style:italic}html pre.shiki code .sdLwU, html code.shiki .sdLwU{--shiki-default:#82AAFF}html pre.shiki code .svy0-, html code.shiki .svy0-{--shiki-default:#EEFFFF}html pre.shiki code .sAklC, html code.shiki .sAklC{--shiki-default:#89DDFF}html pre.shiki code .s0_hs, html code.shiki .s0_hs{--shiki-default:#546E7A;--shiki-default-font-style:italic}html pre.shiki code .s-wAU, html code.shiki .s-wAU{--shiki-default:#F07178}html pre.shiki code .sfyAc, html code.shiki .sfyAc{--shiki-default:#C3E88D}html pre.shiki code .st21m, html code.shiki .st21m{--shiki-default:#F07178;--shiki-default-font-style:italic}html pre.shiki code .sVyDW, html code.shiki .sVyDW{--shiki-default:#C792EA;--shiki-default-font-style:italic}html pre.shiki code .swXnL, html code.shiki .swXnL{--shiki-default:#C3E88D;--shiki-default-font-style:italic}html pre.shiki code .sJ14y, html code.shiki .sJ14y{--shiki-default:#C792EA}html pre.shiki code .s5Dmg, html code.shiki .s5Dmg{--shiki-default:#FFCB6B}html pre.shiki code .sLFUT, html code.shiki .sLFUT{--shiki-default:#EEFFFF;--shiki-default-font-style:italic}html pre.shiki code .sx098, html code.shiki .sx098{--shiki-default:#F78C6C}",{"title":47,"searchDepth":269,"depth":269,"links":3911},[3912,3913,3919,3927],{"id":29,"depth":269,"text":30},{"id":92,"depth":269,"text":93,"children":3914},[3915,3916,3917,3918],{"id":97,"depth":353,"text":98},{"id":293,"depth":353,"text":294},{"id":636,"depth":353,"text":637},{"id":1163,"depth":353,"text":1164},{"id":1458,"depth":269,"text":1459,"children":3920},[3921,3922,3923,3924,3925,3926],{"id":1465,"depth":353,"text":1466},{"id":1600,"depth":353,"text":1601},{"id":1669,"depth":353,"text":1670},{"id":1973,"depth":353,"text":1974},{"id":3204,"depth":353,"text":3205},{"id":3561,"depth":353,"text":3562},{"id":3798,"depth":269,"text":3799,"children":3928},[3929,3930,3931],{"id":3802,"depth":353,"text":3803},{"id":3841,"depth":353,"text":3842},{"id":3879,"depth":353,"text":3880},[3933],"programming","2025-12-29","A Real-World Upgrade Experience",false,"[object Object]","md",{"htmlAttrs":3940,"link":3942,"meta":3947},{"lang":3941},"en",[3943],{"rel":3944,"type":3945,"href":3946},"icon","mange/x-icon","/favicon.ico",[3948,3951,3954,3957,3960,3962,3965,3968,3970,3972,3975],{"name":3949,"content":3950},"keywords","programming, coding, vue",{"name":3952,"content":3953},"robots","index, follow",{"name":3955,"content":3956},"author","Melchior Kannengießer",{"name":3958,"content":3959},"og:title","mjk @ web - Upgrading from Nuxt 3 to Nuxt 4",{"name":3961,"content":3935},"og:description",{"name":3963,"content":3964},"og:image","/logo_518x270.png",{"name":3966,"content":3967},"og:url","http://www.mjkweb.de",{"name":3969,"content":3959},"twitter:title",{"name":3971,"content":3935},"twitter:description",{"name":3973,"content":3974},"twitter:image","/logo_200x200.png",{"name":3976,"content":3094},"twitter:card",{"excerpt_separator":3978},"\u003C!--more-->","/blog/2025/upgrade-nuxt-3-to-nuxt-4",{"title":5,"description":3935},"blog/2025/upgrade-nuxt-3-to-nuxt-4",[3933,3983,1706,104],"coding","d_I-rsq_sDaWYeqXtc2pbaG99BcGN33_KR38EWn9BhQ",1768173584256]