import{f as S,i as B,c as m,a as A,F as k,r as w,u as R,o as p,h as v,t as j,b as T,w as N,d as E,e as O}from"./DXpobJni.js";import{a as V,u as I}from"./DRQU53pY.js";import{u as M,q}from"./CkKsFqM9.js";const H={key:0},U={key:0},X={key:0},L={key:1},z={key:2},W={__name:"index",async setup(G){let d,x;V({title:"mjk @ web",description:"Blog posts about web development, programming, and other stuff",ogTitle:"mjk @ web",ogDescription:"Blog posts about web development, programming, and other stuff",ogImage:"/logo_518x270.png",ogUrl:"http://www.mjkweb.de",twitterTitle:"mjk @ web",twitterDescription:"Blog posts about web development, programming, and other stuff",twitterImage:"/logo_200x200.png",twitterCard:"summary"}),I({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]});const{data:_}=([d,x]=S(async()=>M("blog-list",async()=>{const n=await q("blog").all();let l=n;return l=n.filter(a=>!(a.draft||a.meta?.draft)),[...l].sort((a,r)=>{const f=a.date?new Date(a.date):new Date(0),u=r.date?new Date(r.date):new Date(0);return isNaN(f.getTime())?1:isNaN(u.getTime())?-1:u.getTime()-f.getTime()})})),d=await d,x(),d),D=B(()=>_.value?_.value.map((n,l)=>{const o=n.excerpt;let a=[];if(n.body&&(a=C(n.body)),a.length===0&&o&&o!=="[object Object]"&&(a=F(o)),Array.isArray(a))if(a.every(u=>typeof u=="string"))a=a.filter(u=>{if(!u||typeof u!="string")return!1;const t=u.trim();return!(t.length===0||t==="[object Object]")});else{let u=function(s){Array.isArray(s)||(s=[s]);for(const e of s)if(Array.isArray(e))u(e);else if(typeof e=="string")e.trim().length>0&&e!=="[object Object]"&&t.push(e.trim());else if(typeof e=="object"&&e!==null)if(e.value&&typeof e.value=="string")t.push(e.value.trim());else if(e.type==="text"&&e.value)t.push(String(e.value).trim());else{const i=String(e);i!=="[object Object]"&&i.trim().length>0&&t.push(i.trim())}};const t=[];u(a),a=t.filter(s=>s&&typeof s=="string"&&s.trim().length>0)}else a=[];return{...n,date:P(n.date),paragraphs:a,tags:n.tags||[],categories:n.categories||[]}}):[]);function P(n){if(!n)return"";const l=new Date(n);return isNaN(l.getTime())?"":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(l)}function C(n){if(!n)return[];const l=[];let o=!1;function a(t){return!t||typeof t!="object"?"":t.type==="text"&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(e=>e&&typeof e=="object"?a(e):"").filter(e=>typeof e=="string"&&e.length>0).join(" "):""}function r(t){if(!t||o)return!1;if(Array.isArray(t)){const s=t[0],e=t[2];if(s==="comment"||s==="html"){let i="";if(typeof e=="string"?i=e:Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&(i=e[0]),i&&i.includes("<!--more-->"))return o=!0,!0}if(Array.isArray(e)){for(const i of e)if(r(i))return!0}}else if(typeof t=="object"&&t!==null){if(t.type==="html"&&typeof t.value=="string"&&t.value.includes("<!--more-->"))return o=!0,!0;if(t.children&&Array.isArray(t.children)){for(const s of t.children)if(r(s))return!0}}return!1}function f(t){if(!(!t||o)){if(Array.isArray(t)){const s=t[0],e=t[2];if(Array.isArray(e)&&!o)for(let i=0;i<e.length;i++){const y=e[i];if(Array.isArray(y)){const c=y[0];if(c==="comment"||c==="html"){const g=y[2];let h="";if(typeof g=="string"?h=g:Array.isArray(g)&&g.length>0&&typeof g[0]=="string"&&(h=g[0]),h&&h.includes("<!--more-->")){o=!0;break}}}if(r(y)){o=!0;break}}if(o)return;if(s==="p"&&!o){const i=u(t);if(i&&typeof i=="string"&&i.trim().length>0)if(i.includes("<!--more-->")){const y=i.split("<!--more-->");y[0]&&y[0].trim().length>0&&l.push(y[0].trim()),o=!0}else l.push(i.trim())}if(Array.isArray(e)&&!o)for(const i of e){if(o)break;f(i)}return}if(typeof t=="object"){if(t.type==="html"&&typeof t.value=="string"&&t.value.includes("<!--more-->")){o=!0;return}if(t.children&&Array.isArray(t.children)){for(const s of t.children)if(s&&typeof s=="object"&&s.type==="html"&&typeof s.value=="string"&&s.value.includes("<!--more-->")){o=!0;return}}if(t.type==="paragraph"){const s=a(t);s&&typeof s=="string"&&s.trim().length>0&&l.push(s.trim())}if(t.type==="element"&&t.tag==="p"){const s=a(t);s&&typeof s=="string"&&s.trim().length>0&&l.push(s.trim())}t.children&&Array.isArray(t.children)&&t.children.forEach(s=>{s&&typeof s=="object"&&!o&&f(s)})}}}function u(t){if(!t||!Array.isArray(t))return"";const s=t[2];if(!s)return"";if(typeof s=="string")return s;if(Array.isArray(s)){const e=[];for(const i of s)if(typeof i=="string")e.push(i);else if(Array.isArray(i)){const y=u(i);y&&e.push(y)}return e.filter(i=>typeof i=="string"&&i.length>0).join(" ")}return""}if(Array.isArray(n))n.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)});else if(typeof n=="object"&&n!==null)if(n.value)if(Array.isArray(n.value)){const t=["<!-- EXCERPT_END -->","<!--more-->","EXCERPT_END","<!--more"];for(let s=0;s<n.value.length;s++){const e=n.value[s];if(!(!e||typeof e!="object")){if(Array.isArray(e)){const i=e[0],y=e[2];if(i==="comment"||i==="html"){let c="";if(typeof y=="string")c=y;else if(Array.isArray(y)){for(const g of y)if(typeof g=="string"){c=g;break}else if(Array.isArray(g)&&g.length>2){const h=g[2];if(typeof h=="string"){c=h;break}}}for(const g of t)if(c&&c.includes(g))return l.filter(h=>h&&typeof h=="string"&&h.trim().length>0)}if((i==="h2"||i==="h3"||i==="h4"||i==="h5"||i==="h6")&&l.length>0)break;if(i==="p"){const c=u(e);if(c&&typeof c=="string"&&c.trim().length>0){let g=!1,h="";for(const b of t)if(c.includes(b)){g=!0,h=b;break}if(g){const b=c.split(h);b[0]&&b[0].trim().length>0&&l.push(b[0].trim());break}else l.push(c.trim())}}}else if(typeof e=="object"){if(e.type==="html"||e.type==="comment"){const i=e.value||e.data||"";for(const y of t)if(i&&typeof i=="string"&&i.includes(y))return l.filter(c=>c&&typeof c=="string"&&c.trim().length>0)}if((e.type==="heading"||e.type==="h2"||e.type==="h3"||e.type==="h4"||e.type==="h5"||e.type==="h6")&&l.length>0)break;if(e.type==="paragraph"){const i=a(e);if(i&&typeof i=="string"&&i.trim().length>0){let y=!1;for(const c of t)if(i.includes(c)){const g=i.split(c);g[0]&&g[0].trim().length>0&&l.push(g[0].trim()),y=!0;break}if(!y)l.push(i.trim());else break}}}}}}else typeof n.value=="object"&&n.value!==null&&(n.value.children&&Array.isArray(n.value.children)?n.value.children.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)}):f(n.value));else n.children&&Array.isArray(n.children)?n.children.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)}):f(n);return l.filter(t=>t&&typeof t=="string"&&t.trim().length>0)}function F(n){if(!n)return[];if(typeof n=="string")try{const r=n.split(`

`);if(Array.isArray(r)&&r.length>0)return r.filter(f=>f&&f.trim().length>0)}catch{}const l=[];function o(r){return!r||typeof r!="object"?"":r.type==="text"&&typeof r.value=="string"?r.value:r.children&&Array.isArray(r.children)?r.children.map(u=>u&&typeof u=="object"?o(u):"").filter(u=>typeof u=="string"&&u.length>0).join(" "):""}function a(r){if(!(!r||typeof r!="object")){if(r.type==="paragraph"){const f=o(r);f&&typeof f=="string"&&f.trim().length>0&&l.push(f.trim())}if(r.type==="element"&&r.tag==="p"){const f=o(r);f&&typeof f=="string"&&f.trim().length>0&&l.push(f.trim())}r.children&&Array.isArray(r.children)&&r.children.forEach(f=>{f&&typeof f=="object"&&a(f)})}}if(Array.isArray(n))n.forEach(r=>{r&&typeof r=="object"&&a(r)});else if(typeof n=="object"&&n!==null)n.body&&n.body.children?a(n.body):(n.children,a(n));else if(typeof n=="string"){const r=n.split(`

`);if(Array.isArray(r))return r.filter(f=>f&&f.trim().length>0)}return l.filter(r=>r&&typeof r=="string"&&r.trim().length>0)}return(n,l)=>{const o=O;return p(),m("section",null,[l[3]||(l[3]=A("article",{class:"prose",style:{"margin-bottom":"1rem"}},[A("h1",null,"Blog Posts"),A("p",null,"This are my recent blog posts")],-1)),(p(!0),m(k,null,w(R(D),a=>(p(),m("article",{key:a.path,class:"prose",style:{"margin-bottom":"1rem"}},[A("header",null,[a.date?(p(),m("div",H,j(a.date),1)):v("",!0),A("h2",null,[T(o,{to:a.path},{default:N(()=>[E(j(a.title),1)]),_:2},1032,["to"])])]),a.paragraphs&&a.paragraphs.length>0?(p(),m("main",U,[(p(!0),m(k,null,w(a.paragraphs,(r,f)=>(p(),m("p",{key:f},j(r),1))),128))])):v("",!0),A("footer",null,[a.categories&&a.categories.length>0?(p(),m("span",X,[l[0]||(l[0]=A("b",null,"Categories: ",-1)),(p(!0),m(k,null,w(a.categories,r=>(p(),m("span",{key:r},j(r)+", ",1))),128))])):v("",!0),a.tags&&a.tags.length>0?(p(),m("span",L,[l[1]||(l[1]=A("b",null,"Tags: ",-1)),(p(!0),m(k,null,w(a.tags,r=>(p(),m("span",{key:r},j(r)+", ",1))),128))])):v("",!0),a.categories&&a.categories.length>0||a.tags&&a.tags.length>0?(p(),m("br",z)):v("",!0),T(o,{to:a.path},{default:N(()=>[...l[2]||(l[2]=[E("read more",-1)])]),_:1},8,["to"])])]))),128))])}}};export{W as default};
