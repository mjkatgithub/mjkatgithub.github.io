import{u as v,f as T,g as B,c as o,a,F as c,r as f,h as D,o as l,t as m,b as _,w as b,i as C,e as j,d as x}from"./BFYiSuNS.js";import{u as k}from"./BXDyDnUT.js";import{u as A}from"./B0BAlFQA.js";import{q as M}from"./DFz7d-rh.js";import"./IShi1APO.js";import"./CKbq7JQ8.js";function N(y,s){const{title:p,titleTemplate:g,...d}=y;return k({title:p,titleTemplate:g,_flatMeta:d},{...s,transform(i){const w=v({...i._flatMeta});return delete i._flatMeta,{...i,meta:w}}})}const V={key:0},U={__name:"index",async setup(y){let s,p;N({title:"mjk @ web",description:"Blog posts about web development, programming, and other stuff",ogTitle:"mjk @ web",ogDescription:"Blog posts about web development, programming, and other stuff",ogImage:"/logo_518x270.png",ogUrl:"http://www.mjkweb.de",twitterTitle:"mjk @ web",twitterDescription:"Blog posts about web development, programming, and other stuff",twitterImage:"/logo_200x200.png",twitterCard:"summary"}),k({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]});const{data:g}=([s,p]=T(()=>A("blog-list",()=>{const n=M("/blog").only(["_path","title","date","excerpt","tags","categories"]).sort({date:-1});return n.where({draft:{$ne:!0}}),n.find()})),s=await s,p(),s),d=B(()=>g.value?g.value.map(n=>({...n,date:i(n.date),paragraphs:w(n.excerpt)})):[]);function i(n){const t=new Date(n);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(t)}function w(n){const t=[];function u(e){if(e)if(e.type==="element"&&e.tag==="p"){const r=e.children.filter(h=>h.type==="text").map(h=>h.value).join("");t.push(r)}else Array.isArray(e.children)&&e.children.forEach(r=>u(r))}return u(n),t}return(n,t)=>{const u=j;return l(),o("section",null,[t[4]||(t[4]=a("article",{class:"prose",style:{"margin-bottom":"1rem"}},[a("h1",null,"Blog Posts"),a("p",null,"This are my recent blog posts")],-1)),(l(!0),o(c,null,f(D(d),e=>(l(),o("article",{key:e._path,class:"prose",style:{"margin-bottom":"1rem"}},[a("header",null,[a("div",null,m(e.date),1),a("h2",null,[_(u,{to:e._path},{default:b(()=>[x(m(e.title),1)]),_:2},1032,["to"])])]),"paragraphs"in e?(l(),o("main",V,[(l(!0),o(c,null,f(e.paragraphs,r=>(l(),o("p",{key:r},m(r),1))),128))])):C("",!0),a("footer",null,[t[1]||(t[1]=a("span",null,[a("b",null,"Categories: ")],-1)),(l(!0),o(c,null,f(e.categories,r=>(l(),o("span",{key:r},m(r)+", ",1))),128)),t[2]||(t[2]=a("span",null,[a("b",null,"Tags: ")],-1)),(l(!0),o(c,null,f(e.tags,r=>(l(),o("span",{key:r},m(r)+", ",1))),128)),t[3]||(t[3]=a("br",null,null,-1)),_(u,{to:e._path},{default:b(()=>t[0]||(t[0]=[x("read more")])),_:2},1032,["to"])])]))),128))])}}};export{U as default};
