import{u as v,f as D,g as T,c as o,a as n,F as c,r as f,h as B,o as l,t as m,b as _,w as b,i as C,e as N,d as x}from"./czmp1Zo_.js";import{u as k}from"./BJWrkkLl.js";import{u as j}from"./ta_RDIRI.js";import{q as A}from"./DWyQXac6.js";import"./IShi1APO.js";import"./hVeSrv-M.js";function M(y,s){const{title:p,titleTemplate:g,...d}=y;return k({title:p,titleTemplate:g,_flatMeta:d},{...s,transform(i){const w=v({...i._flatMeta});return delete i._flatMeta,{...i,meta:w}}})}const V={key:0},P={__name:"index",async setup(y){let s,p;M({title:"mjk @ web",description:"Blog posts about web development, programming, and other stuff",ogTitle:"mjk @ web",ogDescription:"Blog posts about web development, programming, and other stuff",ogImage:"/logo_518x270.png",ogUrl:"http://www.mjkweb.de",twitterTitle:"mjk @ web",twitterDescription:"Blog posts about web development, programming, and other stuff",twitterImage:"/logo_200x200.png",twitterCard:"summary"}),k({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]});const{data:g}=([s,p]=D(()=>j("blog-list",()=>{const r=A("/blog").only(["_path","title","date","excerpt","tags","categories"]).sort({date:-1});return r.where({draft:{$ne:!0}}),r.find()})),s=await s,p(),s),d=T(()=>g.value?g.value.map(r=>({...r,date:i(r.date),paragraphs:w(r.excerpt)})):[]);function i(r){if(!r)return console.error("Leeres Datum gefunden:",r),"soon :tm:";const e=new Date(r);return isNaN(e)?(console.error("UngÃ¼ltiges Datum:",r),"invalid date"):new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(e)}function w(r){const e=[];function u(t){if(t)if(t.type==="element"&&t.tag==="p"){const a=t.children.filter(h=>h.type==="text").map(h=>h.value).join("");e.push(a)}else Array.isArray(t.children)&&t.children.forEach(a=>u(a))}return u(r),e}return(r,e)=>{const u=N;return l(),o("section",null,[e[4]||(e[4]=n("article",{class:"prose",style:{"margin-bottom":"1rem"}},[n("h1",null,"Blog Posts"),n("p",null,"This are my recent blog posts")],-1)),(l(!0),o(c,null,f(B(d),t=>(l(),o("article",{key:t._path,class:"prose",style:{"margin-bottom":"1rem"}},[n("header",null,[n("div",null,m(t.date),1),n("h2",null,[_(u,{to:t._path},{default:b(()=>[x(m(t.title),1)]),_:2},1032,["to"])])]),"paragraphs"in t?(l(),o("main",V,[(l(!0),o(c,null,f(t.paragraphs,a=>(l(),o("p",{key:a},m(a),1))),128))])):C("",!0),n("footer",null,[e[1]||(e[1]=n("span",null,[n("b",null,"Categories: ")],-1)),(l(!0),o(c,null,f(t.categories,a=>(l(),o("span",{key:a},m(a)+", ",1))),128)),e[2]||(e[2]=n("span",null,[n("b",null,"Tags: ")],-1)),(l(!0),o(c,null,f(t.tags,a=>(l(),o("span",{key:a},m(a)+", ",1))),128)),e[3]||(e[3]=n("br",null,null,-1)),_(u,{to:t._path},{default:b(()=>e[0]||(e[0]=[x("read more")])),_:2},1032,["to"])])]))),128))])}}};export{P as default};
