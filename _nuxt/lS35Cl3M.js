import{f as B,j as R,c as m,a as A,F as _,r as k,i as O,o as p,h as v,t as d,b as T,w as N,d as E,e as I}from"./DZC38BMh.js";import{a as V,u as M}from"./tabWRXc4.js";import{u as q,q as H}from"./3WVYmae0.js";var U={};const X={key:0},L={key:0},z={key:0},G={key:1},J={key:2},Z={__name:"index",async setup(K){let j,w;V({title:"mjk @ web",description:"Blog posts about web development, programming, and other stuff",ogTitle:"mjk @ web",ogDescription:"Blog posts about web development, programming, and other stuff",ogImage:"/logo_518x270.png",ogUrl:"http://www.mjkweb.de",twitterTitle:"mjk @ web",twitterDescription:"Blog posts about web development, programming, and other stuff",twitterImage:"/logo_200x200.png",twitterCard:"summary"}),M({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]});const D=U.NITRO_PRESET==="static",{data:x}=([j,w]=B(async()=>q("blog-list",async()=>{const n=await H("blog").all();let l=n;return D&&(l=n.filter(s=>{const r=s.draft||s.meta?.draft,f=s.path?.includes("/drafts/");return!r&&!f})),[...l].sort((s,r)=>{const f=s.date?new Date(s.date):new Date(0),u=r.date?new Date(r.date):new Date(0);return isNaN(f.getTime())?1:isNaN(u.getTime())?-1:u.getTime()-f.getTime()})})),j=await j,w(),j),P=R(()=>x.value?x.value.map((n,l)=>{const o=n.excerpt;let s=[];if(n.body&&(s=S(n.body)),s.length===0&&o&&o!=="[object Object]"&&(s=C(o)),Array.isArray(s))if(s.every(u=>typeof u=="string"))s=s.filter(u=>{if(!u||typeof u!="string")return!1;const t=u.trim();return!(t.length===0||t==="[object Object]")});else{let u=function(a){Array.isArray(a)||(a=[a]);for(const e of a)if(Array.isArray(e))u(e);else if(typeof e=="string")e.trim().length>0&&e!=="[object Object]"&&t.push(e.trim());else if(typeof e=="object"&&e!==null)if(e.value&&typeof e.value=="string")t.push(e.value.trim());else if(e.type==="text"&&e.value)t.push(String(e.value).trim());else{const i=String(e);i!=="[object Object]"&&i.trim().length>0&&t.push(i.trim())}};const t=[];u(s),s=t.filter(a=>a&&typeof a=="string"&&a.trim().length>0)}else s=[];return{...n,date:F(n.date),paragraphs:s,tags:n.tags||[],categories:n.categories||[]}}):[]);function F(n){if(!n)return"";const l=new Date(n);return isNaN(l.getTime())?"":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(l)}function S(n){if(!n)return[];const l=[];let o=!1;function s(t){return!t||typeof t!="object"?"":t.type==="text"&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(e=>e&&typeof e=="object"?s(e):"").filter(e=>typeof e=="string"&&e.length>0).join(" "):""}function r(t){if(!t||o)return!1;if(Array.isArray(t)){const a=t[0],e=t[2];if(a==="comment"||a==="html"){let i="";if(typeof e=="string"?i=e:Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&(i=e[0]),i&&i.includes("<!--more-->"))return o=!0,!0}if(Array.isArray(e)){for(const i of e)if(r(i))return!0}}else if(typeof t=="object"&&t!==null){if(t.type==="html"&&typeof t.value=="string"&&t.value.includes("<!--more-->"))return o=!0,!0;if(t.children&&Array.isArray(t.children)){for(const a of t.children)if(r(a))return!0}}return!1}function f(t){if(!(!t||o)){if(Array.isArray(t)){const a=t[0],e=t[2];if(Array.isArray(e)&&!o)for(let i=0;i<e.length;i++){const y=e[i];if(Array.isArray(y)){const c=y[0];if(c==="comment"||c==="html"){const g=y[2];let h="";if(typeof g=="string"?h=g:Array.isArray(g)&&g.length>0&&typeof g[0]=="string"&&(h=g[0]),h&&h.includes("<!--more-->")){o=!0;break}}}if(r(y)){o=!0;break}}if(o)return;if(a==="p"&&!o){const i=u(t);if(i&&typeof i=="string"&&i.trim().length>0)if(i.includes("<!--more-->")){const y=i.split("<!--more-->");y[0]&&y[0].trim().length>0&&l.push(y[0].trim()),o=!0}else l.push(i.trim())}if(Array.isArray(e)&&!o)for(const i of e){if(o)break;f(i)}return}if(typeof t=="object"){if(t.type==="html"&&typeof t.value=="string"&&t.value.includes("<!--more-->")){o=!0;return}if(t.children&&Array.isArray(t.children)){for(const a of t.children)if(a&&typeof a=="object"&&a.type==="html"&&typeof a.value=="string"&&a.value.includes("<!--more-->")){o=!0;return}}if(t.type==="paragraph"){const a=s(t);a&&typeof a=="string"&&a.trim().length>0&&l.push(a.trim())}if(t.type==="element"&&t.tag==="p"){const a=s(t);a&&typeof a=="string"&&a.trim().length>0&&l.push(a.trim())}t.children&&Array.isArray(t.children)&&t.children.forEach(a=>{a&&typeof a=="object"&&!o&&f(a)})}}}function u(t){if(!t||!Array.isArray(t))return"";const a=t[2];if(!a)return"";if(typeof a=="string")return a;if(Array.isArray(a)){const e=[];for(const i of a)if(typeof i=="string")e.push(i);else if(Array.isArray(i)){const y=u(i);y&&e.push(y)}return e.filter(i=>typeof i=="string"&&i.length>0).join(" ")}return""}if(Array.isArray(n))n.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)});else if(typeof n=="object"&&n!==null)if(n.value)if(Array.isArray(n.value)){const t=["<!-- EXCERPT_END -->","<!--more-->","EXCERPT_END","<!--more"];for(let a=0;a<n.value.length;a++){const e=n.value[a];if(!(!e||typeof e!="object")){if(Array.isArray(e)){const i=e[0],y=e[2];if(i==="comment"||i==="html"){let c="";if(typeof y=="string")c=y;else if(Array.isArray(y)){for(const g of y)if(typeof g=="string"){c=g;break}else if(Array.isArray(g)&&g.length>2){const h=g[2];if(typeof h=="string"){c=h;break}}}for(const g of t)if(c&&c.includes(g))return l.filter(h=>h&&typeof h=="string"&&h.trim().length>0)}if((i==="h2"||i==="h3"||i==="h4"||i==="h5"||i==="h6")&&l.length>0)break;if(i==="p"){const c=u(e);if(c&&typeof c=="string"&&c.trim().length>0){let g=!1,h="";for(const b of t)if(c.includes(b)){g=!0,h=b;break}if(g){const b=c.split(h);b[0]&&b[0].trim().length>0&&l.push(b[0].trim());break}else l.push(c.trim())}}}else if(typeof e=="object"){if(e.type==="html"||e.type==="comment"){const i=e.value||e.data||"";for(const y of t)if(i&&typeof i=="string"&&i.includes(y))return l.filter(c=>c&&typeof c=="string"&&c.trim().length>0)}if((e.type==="heading"||e.type==="h2"||e.type==="h3"||e.type==="h4"||e.type==="h5"||e.type==="h6")&&l.length>0)break;if(e.type==="paragraph"){const i=s(e);if(i&&typeof i=="string"&&i.trim().length>0){let y=!1;for(const c of t)if(i.includes(c)){const g=i.split(c);g[0]&&g[0].trim().length>0&&l.push(g[0].trim()),y=!0;break}if(!y)l.push(i.trim());else break}}}}}}else typeof n.value=="object"&&n.value!==null&&(n.value.children&&Array.isArray(n.value.children)?n.value.children.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)}):f(n.value));else n.children&&Array.isArray(n.children)?n.children.forEach(t=>{t&&typeof t=="object"&&!o&&f(t)}):f(n);return l.filter(t=>t&&typeof t=="string"&&t.trim().length>0)}function C(n){if(!n)return[];if(typeof n=="string")try{const r=n.split(`

`);if(Array.isArray(r)&&r.length>0)return r.filter(f=>f&&f.trim().length>0)}catch{}const l=[];function o(r){return!r||typeof r!="object"?"":r.type==="text"&&typeof r.value=="string"?r.value:r.children&&Array.isArray(r.children)?r.children.map(u=>u&&typeof u=="object"?o(u):"").filter(u=>typeof u=="string"&&u.length>0).join(" "):""}function s(r){if(!(!r||typeof r!="object")){if(r.type==="paragraph"){const f=o(r);f&&typeof f=="string"&&f.trim().length>0&&l.push(f.trim())}if(r.type==="element"&&r.tag==="p"){const f=o(r);f&&typeof f=="string"&&f.trim().length>0&&l.push(f.trim())}r.children&&Array.isArray(r.children)&&r.children.forEach(f=>{f&&typeof f=="object"&&s(f)})}}if(Array.isArray(n))n.forEach(r=>{r&&typeof r=="object"&&s(r)});else if(typeof n=="object"&&n!==null)n.body&&n.body.children?s(n.body):(n.children,s(n));else if(typeof n=="string"){const r=n.split(`

`);if(Array.isArray(r))return r.filter(f=>f&&f.trim().length>0)}return l.filter(r=>r&&typeof r=="string"&&r.trim().length>0)}return(n,l)=>{const o=I;return p(),m("section",null,[l[3]||(l[3]=A("article",{class:"prose",style:{"margin-bottom":"1rem"}},[A("h1",null,"Blog Posts"),A("p",null,"This are my recent blog posts")],-1)),(p(!0),m(_,null,k(O(P),s=>(p(),m("article",{key:s.path,class:"prose",style:{"margin-bottom":"1rem"}},[A("header",null,[s.date?(p(),m("div",X,d(s.date),1)):v("",!0),A("h2",null,[T(o,{to:s.path},{default:N(()=>[E(d(s.title),1)]),_:2},1032,["to"])])]),s.paragraphs&&s.paragraphs.length>0?(p(),m("main",L,[(p(!0),m(_,null,k(s.paragraphs,(r,f)=>(p(),m("p",{key:f},d(r),1))),128))])):v("",!0),A("footer",null,[s.categories&&s.categories.length>0?(p(),m("span",z,[l[0]||(l[0]=A("b",null,"Categories: ",-1)),(p(!0),m(_,null,k(s.categories,r=>(p(),m("span",{key:r},d(r)+", ",1))),128))])):v("",!0),s.tags&&s.tags.length>0?(p(),m("span",G,[l[1]||(l[1]=A("b",null,"Tags: ",-1)),(p(!0),m(_,null,k(s.tags,r=>(p(),m("span",{key:r},d(r)+", ",1))),128))])):v("",!0),s.categories&&s.categories.length>0||s.tags&&s.tags.length>0?(p(),m("br",J)):v("",!0),T(o,{to:s.path},{default:N(()=>[...l[2]||(l[2]=[E("read more",-1)])]),_:1},8,["to"])])]))),128))])}}};export{Z as default};
